<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ENMeval 2.0.0 Vignette • ENMeval</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ENMeval 2.0.0 Vignette">
<meta property="og:description" content="ENMeval">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ENMeval</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ENMeval-2.0.0-vignette.html">ENMeval 2.0.0 Vignette</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ENMeval-2.0.0-vignette_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ENMeval 2.0.0 Vignette</h1>
                        <h4 class="author">Jamie M. Kass, Robert Muscarella, Gonzalo E. Pinilla-Buitrago, and Peter J. Galante</h4>
            
            <h4 class="date">2021-05-12</h4>
      
      
      <div class="hidden name"><code>ENMeval-2.0.0-vignette.Rmd</code></div>

    </div>

    
    
<ul>
<li><a href="#intro">Introduction</a></li>
<li><a href="#data">Data Acquisition &amp; Pre-processing</a></li>
<li><a href="#partition">Partitioning Occurrences for Evaluation</a></li>
<li><a href="#eval">Running ENMeval</a></li>
<li><a href="#select">Model Selection</a></li>
<li><a href="#plot">Plotting results</a></li>
<li><a href="#null">Null Models</a></li>
<li><a href="#metadata">Metadata</a></li>
<li><a href="#resources">References and Resources</a></li>
</ul>
<div id="intro" class="section level2">
<h2 class="hasAnchor">
<a href="#intro" class="anchor"></a>Introduction</h2>
<p><a href="https://cran.r-project.org/package=ENMeval"><code>ENMeval</code></a> is an R package that performs automated tuning and evaluations of ecological niche models (ENMs, a.k.a. species distribution models or SDMs), which can estimate species’ ranges and niche characteristics using data on species occurrences and environmental variables (Franklin 2010, Peterson et al. 2011, Guisan et al. 2017).</p>
<p>Some of the most frequently used ENMs are machine learning algorithms with settings that can be “tuned” to determine optimal levels of model complexity (Hastie et al. 2009, Radosavljevic &amp; Anderson 2014, Hallgren et al. 2019). In implementation, this means building models of varying settings, then evaluating them and comparing their performance to select the optimal settings. Such tuning exercises can result in models that balance goodness-of-fit (i.e., avoiding overfitting) and predictive ability. Model evaluation is often done with cross-validation, which consists of partitioning the data into groups, building a model with all the groups but one, evaluating this model on the left-out group, then repeating the process until all groups have been left out once (Hastie et al. 2009, Roberts et al. 2017).</p>
<p><code>ENMeval</code> has one primary function, <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code>, which runs the tuning analysis and evaluations, returning an <code>ENMevaluation</code> object that contains the results. These results include a table of evaluation statistics, fitted model objects, and prediction rasters for each combination of model settings. The older versions of <code>ENMeval</code> (0.3.0 and earlier; Muscarella et al. 2014) implemented only the ENM presence-background algorithm Maxent through the Java software <a href="http://biodiversityinformatics.amnh.org/open_source/maxent/">maxent.jar</a> and the R package <a href="https://cran.r-project.org/package=maxnet"><code>maxnet</code></a>, but <code>ENMeval</code> 2.0.0 offers functionality for adding and customizing the implementations of ENM algorithms and their evaluations. This new version also features automatic generation of metadata, a null model for calculating effect size and significance of performance metrics, various plotting tools, options for parallel computing, and more.<br>
In this updated vignette, we detail a full ENM analysis: acquisition and processing of input data, sampling background data, deciding on partitioning methods, tuning models, examining results and selecting optimal model settings, building null models to test for significance of performance metrics, and more using <code>ENMeval</code> 2.0.0 and other relevant R packages. In addition to this vignette, there are other excellent tutorials on ENMs, some of which can be found in the <a href="#resources">References and Resources</a> section.</p>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data Acquisition &amp; Pre-processing</h2>
<p>We’ll start by downloading an occurrence dataset for <a href="https://en.wikipedia.org/wiki/Brown-throated_sloth"><em>Bradypus variegatus</em></a>, the brown-throated sloth. Along the way, if you notice you cannot load a particular package, simply install it with <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>, then try <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> again.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load packages -- the order here is important because some pkg functions overwrite others.</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">ENMeval</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="co"># Set a random seed in order to be able to reproduce this analysis.</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">48</span><span class="op">)</span>

<span class="co"># You can search online databases like GBIF using the spocc package (commented below),</span>
<span class="co"># but here we will load in some pre-downloaded data.</span>
<span class="co"># bv &lt;- spocc::occ('Bradypus variegatus', 'gbif', limit=300, has_coords=TRUE)</span>
<span class="co"># occs &lt;- as.data.frame(bv$gbif$data$Bradypus_variegatus[,2:3])</span>
<span class="va">occs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"bvariegatus.rds"</span><span class="op">)</span>

<span class="co"># Removing occurrences that have the same coordinates is good practice to</span>
<span class="co"># avoid pseudoreplication.</span>
<span class="va">occs</span> <span class="op">&lt;-</span> <span class="va">occs</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span>,<span class="op">]</span></code></pre></div>
<p>We are going to model the climatic niche suitability for our focal species using climate data from <a href="http://www.worldclim.org/">WorldClim</a>. WorldClim has a range of variables available at various resolutions; for simplicity, here we’ll use the 9 bioclimatic variables at 10 arcmin resolution (about 20 km across at the equator) included in the <code>dismo</code> package from WorldClim 1.4. These climatic data are based on 50-year averages from 1950-2000.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Locate the predictor raster files from the dismo folder.</span>
<span class="va">envs.files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span>path<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">'dismo'</span><span class="op">)</span>, <span class="st">'/ex'</span>, sep<span class="op">=</span><span class="st">''</span><span class="op">)</span>, 
                         pattern<span class="op">=</span><span class="st">'grd'</span>, full.names<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Read the raster files into a RasterStack.</span>
<span class="co"># These variables represent 8 bioclimatic variables and one categorical variable "biome".</span>
<span class="co"># Find the descriptions of the bioclimatic variables here: </span>
<span class="co"># https://www.worldclim.org/data/bioclim.html</span>
<span class="va">envs</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/stack.html">stack</a></span><span class="op">(</span><span class="va">envs.files</span><span class="op">)</span>
<span class="co"># The biome raster has some NAs for cells that have values in the other rasters.</span>
<span class="co"># Let's mask all rasters to biome to change the value of these cells to NA for all rasters.</span>
<span class="co"># ENMeval will do this automatically, but let's do it here to avoid the warning message later.</span>
<span class="co"># We change back from a RasterBrick to RasterStack because of issues with assigning </span>
<span class="co"># factor rasters for RasterBricks.</span>
<span class="va">envs</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/mask.html">mask</a></span><span class="op">(</span><span class="va">envs</span>, <span class="va">envs</span><span class="op">[[</span><span class="fl">9</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/stack.html">stack</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># Make sure to declare the categorical variable as a factor</span>
<span class="va">envs</span><span class="op">$</span><span class="va">biome</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/factor.html">as.factor</a></span><span class="op">(</span><span class="va">envs</span><span class="op">$</span><span class="va">biome</span><span class="op">)</span>
<span class="co"># Let's now remove occurrences that are cell duplicates -- these are</span>
<span class="co"># occurrences that share a grid cell in the predictor variable rasters.</span>
<span class="co"># Although Maxent does this by default, keep in mind that for other algorithms you may</span>
<span class="co"># or may not want to do this based on the aims of your study.</span>
<span class="co"># Another way to space occurrence records a defined distance from each other to avoid</span>
<span class="co"># spatial autocorrelation is with spatial thinning (Aiello-Lammens et al. 2015).</span>
<span class="va">occs.cells</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extract.html">extract</a></span><span class="op">(</span><span class="va">envs</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">occs</span>, cellnumbers <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">occs.cellDups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span><span class="op">(</span><span class="va">occs.cells</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="va">occs</span> <span class="op">&lt;-</span> <span class="va">occs</span><span class="op">[</span><span class="op">!</span><span class="va">occs.cellDups</span>,<span class="op">]</span>

<span class="co"># Plot first raster in the stack, the mean annual temperature.</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">envs</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, main<span class="op">=</span><span class="st">"Mean annual temperature"</span><span class="op">)</span>

<span class="co"># Add points for all the occurrence points onto the raster.</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span>

<span class="co"># There are some points east of the Amazon River.</span>
<span class="co"># Suppose we know this is a population that we don't want to include in the model.</span>
<span class="co"># We can remove these points from the analysis by subsetting the occurrences by </span>
<span class="co"># latitude and longitude.</span>
<span class="va">occs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">latitude</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">20</span>, <span class="va">longitude</span> <span class="op">&lt;</span> <span class="op">-</span><span class="fl">45</span><span class="op">)</span>

<span class="co"># Plot the subsetted occurrences to make sure we filtered correctly.</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">occs</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/envDownload-1.png" width="672"></p>
<p>Now let’s take a look at which areas of this extent are climatically different with respect to the areas associated with the occurrence points. To do this, we’ll use the Multivariate Environmental Similarity surface, or MESS (Elith et al. 2010). Higher positive values indicate increasing similarity, while higher negative values indicate dissimilarity. Other methods besides MESS have also been proposed and warrant exploration (e.g., Owens et al. 2013, Mesgaran et al. 2014). This is important to investigate when considering model transfer to other times or places, as environments that are extremely dissimilar to those used to train the model in the present can result in projections with high uncertainty (Wenger &amp; Olden 2012, Wright et al. 2015, Soley-Guardia 2019).</p>
<p>Although the <code><a href="https://rdrr.io/pkg/dismo/man/mess.html">mess()</a></code> function from the dismo package is frequently used, here we will use tools from the package <a href="https://github.com/johnbaums/rmaxent"><code>rmaxent</code></a> (Baumgartner &amp; Wilson 2021) because it also plots maps of the most similar and dissimilar variables – this functionality is currently included in <code>ENMeval</code> in the <code><a href="../reference/similarity.html">similarity()</a></code> function. We will demonstrate the <code>ENMeval</code> plotting functions for environmental similarity later.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First we extract the climatic variable values at the occurrence points -- these values are </span>
<span class="co"># our "reference".</span>
<span class="co"># We remove the categorical variable for these operations because the math only makes sense </span>
<span class="co"># for continuous variables -- the function will not work with categorical variables.</span>
<span class="va">occs.z</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extract.html">extract</a></span><span class="op">(</span><span class="va">envs</span><span class="op">[[</span><span class="op">-</span><span class="fl">9</span><span class="op">]</span><span class="op">]</span>, <span class="va">occs</span><span class="op">)</span>
<span class="co"># Now we use the similarity() function (borrowed from the rmaxent package) to calculate </span>
<span class="co"># environmental similarity metrics of our predictor variable extent compared to the reference</span>
<span class="co"># points.</span>
<span class="va">occs.sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/similarity.html">similarity</a></span><span class="op">(</span><span class="va">envs</span><span class="op">[[</span><span class="op">-</span><span class="fl">9</span><span class="op">]</span><span class="op">]</span>, <span class="va">occs.z</span><span class="op">)</span>
<span class="va">occs.mess</span> <span class="op">&lt;-</span> <span class="va">occs.sim</span><span class="op">$</span><span class="va">similarity_min</span>
<span class="co"># This is the MESS plot -- increasingly negative values represent increasingly different </span>
<span class="co"># climatic conditions from the reference (our occurrences), while increasingly positive </span>
<span class="co"># values are more similar. First, we'll make a SpatialPoints object for our occurrences </span>
<span class="co"># for plotting with levelplot() from the rasterVis package (Lamigueiro &amp; Hijmans 2021).</span>
<span class="co"># This package has great plotting functionality for rasters, and by default bins values for </span>
<span class="co"># display when data is continuous.</span>
<span class="va">occs.sp</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPoints.html">SpatialPoints</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span>
<span class="co"># Vector data (points, polygons) are added to a levelplot with a "+", like ggplot.</span>
<span class="fu">rasterVis</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rasterVis/man/levelplot-methods.html">levelplot</a></span><span class="op">(</span><span class="va">occs.mess</span>, main <span class="op">=</span> <span class="st">"Environmental similarity"</span>, margin <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">latticeExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/layer.html">layer</a></span><span class="op">(</span><span class="fu">sp.points</span><span class="op">(</span><span class="va">occs.sp</span>, col<span class="op">=</span><span class="st">"black"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/unnamed-chunk-1-1.png" width="672"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Continuous plotting can be done as demonstrated below by specifiying a scale</span>
<span class="va">myScale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html">cellStats</a></span><span class="op">(</span><span class="va">occs.mess</span>, <span class="va">min</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html">cellStats</a></span><span class="op">(</span><span class="va">occs.mess</span>, <span class="va">max</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="fu">rasterVis</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rasterVis/man/levelplot-methods.html">levelplot</a></span><span class="op">(</span><span class="va">occs.mess</span>, main <span class="op">=</span> <span class="st">"Environmental similarity"</span>, at <span class="op">=</span> <span class="va">myScale</span>, margin <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">latticeExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/layer.html">layer</a></span><span class="op">(</span><span class="fu">sp.points</span><span class="op">(</span><span class="va">occs.sp</span>, col<span class="op">=</span><span class="st">"black"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/unnamed-chunk-1-2.png" width="672"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Here we define some good colors for representing categorical variables</span>
<span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">brewer.pal</a></span><span class="op">(</span><span class="fl">8</span>, <span class="st">"Set1"</span><span class="op">)</span>
<span class="co"># This map shows the variable for each grid cell that is most different from the reference</span>
<span class="fu">rasterVis</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rasterVis/man/levelplot-methods.html">levelplot</a></span><span class="op">(</span><span class="va">occs.sim</span><span class="op">$</span><span class="va">mod</span>, col.regions <span class="op">=</span> <span class="va">cols</span>, main <span class="op">=</span> <span class="st">"Most different variable"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">latticeExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/layer.html">layer</a></span><span class="op">(</span><span class="fu">sp.points</span><span class="op">(</span><span class="va">occs.sp</span>, col<span class="op">=</span><span class="st">"black"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/unnamed-chunk-1-3.png" width="672"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># This map shows the variable for each grid cell that is most similar to the reference</span>
<span class="fu">rasterVis</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rasterVis/man/levelplot-methods.html">levelplot</a></span><span class="op">(</span><span class="va">occs.sim</span><span class="op">$</span><span class="va">mos</span>, col.regions <span class="op">=</span> <span class="va">cols</span>, main <span class="op">=</span> <span class="st">"Most similar variable"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">latticeExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/layer.html">layer</a></span><span class="op">(</span><span class="fu">sp.points</span><span class="op">(</span><span class="va">occs.sp</span>, col<span class="op">=</span><span class="st">"black"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/unnamed-chunk-1-4.png" width="672"></p>
<p>Since our models will compare the environment at occurrence localities to the environment at background localities, we need to sample random points from a background extent. Now we will specify the study extent that defines where we sample background data by cropping our global predictor variable rasters to a smaller region. To help ensure we do not include areas that are suitable for our species but are unoccupied due to limitations like dispersal constraints, we will conservatively define the background extent as an area surrounding our occurrence localities (VanDerWal et al. 2009, Merow et al. 2013). We will do this by buffering a bounding box that includes all occurrence localities. Some other methods of background extent delineation (e.g., minimum convex hulls) are more conservative because they better characterize the geographic space holding the points. In any case, this is one of the many things that you will need to carefully consider for your own study.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We'll now experiment with a different spatial R package called sf (simple features).</span>
<span class="co"># Let's make our occs into a sf object -- here we specify the coordinate reference system  </span>
<span class="co"># (crs) in order to perform spatial functions.</span>
<span class="va">occs.sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">occs</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"longitude"</span>,<span class="st">"latitude"</span><span class="op">)</span>, 
                        crs <span class="op">=</span> <span class="st">"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"</span><span class="op">)</span>
<span class="co"># Make sure the RasterStack has the same coordinate reference system (CRS) string.</span>
<span class="co"># Both are the same CRS, but when the strings are different, some spatial functions error.</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/projection.html">crs</a></span><span class="op">(</span><span class="va">envs</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/projection.html">crs</a></span><span class="op">(</span><span class="va">occs.sf</span><span class="op">)</span>

<span class="co"># Buffer all occurrences by 7 degrees: this will give a warning because we are not buffering. </span>
<span class="co"># in a projected coordinate system, then union the polygons together (for visualization), </span>
<span class="co"># and convert back to a form that the raster package can use.</span>
<span class="co"># We choose 7 degrees here to avoid sampling the Caribbean islands.</span>
<span class="co"># For simplicity, this vignette does not involve coordinate reference system (CRS) </span>
<span class="co"># transformations, but for a real analysis, transforming to a projected CRS before </span>
<span class="co"># buffering is best practice.</span>
<span class="va">occs.buf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html">st_buffer</a></span><span class="op">(</span><span class="va">occs.sf</span>, dist <span class="op">=</span> <span class="fl">7</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html">st_union</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html">st_sf</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">envs</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html">names</a></span><span class="op">(</span><span class="va">envs</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span>
<span class="co"># To add sf objects to a plot, use add = TRUE</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">occs.buf</span>, border <span class="op">=</span> <span class="st">"blue"</span>, lwd <span class="op">=</span> <span class="fl">3</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/backgExt-1.png" width="672"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Crop environmental rasters to match the study extent</span>
<span class="va">envs.bg</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/crop.html">crop</a></span><span class="op">(</span><span class="va">envs</span>, <span class="va">occs.buf</span><span class="op">)</span>
<span class="co"># Next, mask the rasters to the shape of the buffers</span>
<span class="va">envs.bg</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/mask.html">mask</a></span><span class="op">(</span><span class="va">envs.bg</span>, <span class="va">occs.buf</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">envs.bg</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html">names</a></span><span class="op">(</span><span class="va">envs</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">occs.buf</span>, border <span class="op">=</span> <span class="st">"blue"</span>, lwd <span class="op">=</span> <span class="fl">3</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/backgExt-2.png" width="672"></p>
<p>In the next step, we’ll sample 10,000 random points from the background (note that the number of background points is also a consideration you should make with respect to your own study).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Randomly sample 10,000 background points from one background extent raster </span>
<span class="co"># (only one per cell without replacement). Note: Since the raster has &lt;10,000 pixels, </span>
<span class="co"># you'll get a warning and all pixels will be used for background. We will be sampling </span>
<span class="co"># from the biome variable because it is missing some grid cells, and we are trying to </span>
<span class="co"># avoid getting background points with NA. If one raster in the stack has NAs where the</span>
<span class="co"># other rasters have data, ENMeval internally converts these cells to NA.</span>
<span class="va">bg</span> <span class="op">&lt;-</span> <span class="fu">dismo</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/dismo/man/randomPoints.html">randomPoints</a></span><span class="op">(</span><span class="va">envs.bg</span><span class="op">[[</span><span class="fl">9</span><span class="op">]</span><span class="op">]</span>, n <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">bg</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span>

<span class="co"># Notice how we have pretty good coverage (every cell).</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">envs.bg</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">bg</span>, pch <span class="op">=</span> <span class="fl">20</span>, cex <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/backgPts-1.png" width="672"></p>
</div>
<div id="partition" class="section level2">
<h2 class="hasAnchor">
<a href="#partition" class="anchor"></a>Partitioning Occurrences for Evaluation</h2>
<p>A run of <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code> begins by using one of seven methods to partition occurrence localities into validation and training bins (folds) for <em>k</em>-fold cross-validation (Fielding &amp; Bell 1997, Hastie et al. 2009, Peterson et al. 2011). Data partitioning is done internally by <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code> based on what the user inputs for the <code>partitions</code> argument, but this can also be done externally using the partitioning functions. In this section, we explain and illustrate these different functions. We also demonstrate how to make informative plots of partitions and the environmental similarity of partitions to the background or study extent.</p>
<ol style="list-style-type: decimal">
<li><a href="#block">Spatial Block</a></li>
<li><a href="#cb1">Spatial Checkerboard</a></li>
<li><a href="#cb2">Spatial Hierarchical Checkerboard</a></li>
<li><a href="#jack">Jackknife (leave-one-out)</a></li>
<li><a href="#rand">Random <em>k</em>-fold</a></li>
<li><a href="#testing">Fully Withheld Testing Data</a></li>
<li><a href="#user">User</a></li>
</ol>
<p>The first three partitioning methods are variations of what Radosavljevic and Anderson (2014) referred to as ‘masked geographically structured’ data partitioning. Basically, these methods partition both occurrence and background records into evaluation bins based on spatial rules. The intention is to reduce spatial-autocorrelation between points that are included in the validation and training bins, which can overinflate model performance, at least for data sets that result from biased sampling (Veloz 2009, Wenger &amp; Olden 2012, Roberts et al. 2017). Other spatial partitioning methods for ENMs can be found in the R package <code>blockCV</code> (Valavi et al. 2019), which we demonstrate below for use with <code>ENMeval</code>.</p>
<div id="block" class="section level4">
<h4 class="hasAnchor">
<a href="#block" class="anchor"></a>1. Block</h4>
<p>First, the ‘block’ method partitions data according to the latitude and longitude lines that divide the occurrence localities into four spatial groups of equal numbers (or as close as possible). Both occurrence and background localities are assigned to each of the four bins based on their position with respect to these lines – the first direction bisects the points into two groups, and the second direction bisects each of these further into two groups each, resulting in four groups. The resulting object is a list of two vectors that supply the bin designation for each occurrence and background point. In <code>ENMeval</code> 2.0.0, users can additionally specify different orientations for the blocking with the <code>orientation</code> argument.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">block</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/partitions.html">get.block</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">bg</span>, orientation <span class="op">=</span> <span class="st">"lat_lon"</span><span class="op">)</span>
<span class="co"># Let's make sure that we have an even number of occurrences in each partition.</span>
<span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">block</span><span class="op">$</span><span class="va">occs.grp</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  1  2  3  4 </span>
<span class="co">#&gt; 22 21 22 21</span>
<span class="co"># We can plot our partitions on one of our predictor variable rasters to visualize </span>
<span class="co"># where they fall in space.</span>
<span class="co"># The ENMeval 2.0.0 plotting functions use ggplot2 (Wickham 2016), a popular plotting </span>
<span class="co"># package for R with many online resources.</span>
<span class="co"># We can add to the ggplots with other ggplot functions in an additive way, making </span>
<span class="co"># these plots easily customizable.</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">occs</span>, pts.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">occs.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Spatial block partitions: occurrences"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.block-1.png" width="672"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># PLotting the background shows that the background extent is partitioned in a way </span>
<span class="co"># that maximizes evenness of points across the four bins, not to maximize evenness of area.</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">bg</span>, pts.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">bg.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Spatial block partitions: background"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.block-2.png" width="672"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># If we are curious how different the environment associated with each partition is from </span>
<span class="co"># that of all the others, we can use this function to plot histograms or rasters of MESS </span>
<span class="co"># predictions with each partition as the reference.</span>
<span class="co"># First we need to extract the predictor variable values at our occurrence and </span>
<span class="co"># background localities.</span>
<span class="va">occs.z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">occs</span>, <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extract.html">extract</a></span><span class="op">(</span><span class="va">envs</span>, <span class="va">occs</span><span class="op">)</span><span class="op">)</span>
<span class="va">bg.z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">bg</span>, <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extract.html">extract</a></span><span class="op">(</span><span class="va">envs</span>, <span class="va">bg</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/evalplot.envSim.hist.html">evalplot.envSim.hist</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, bg.z <span class="op">=</span> <span class="va">bg.z</span>, 
                     occs.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">bg.grp</span>, categoricals <span class="op">=</span> <span class="st">"biome"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.block-3.png" width="672"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.envSim.hist.html">evalplot.envSim.hist</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"most_diff"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, bg.z <span class="op">=</span> <span class="va">bg.z</span>, 
                     occs.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">bg.grp</span>, categoricals <span class="op">=</span> <span class="st">"biome"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.block-4.png" width="672"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.envSim.hist.html">evalplot.envSim.hist</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"most_sim"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, bg.z <span class="op">=</span> <span class="va">bg.z</span>, 
                     occs.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">bg.grp</span>, categoricals <span class="op">=</span> <span class="st">"biome"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.block-5.png" width="672"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Here we plot environmental similarity values for the entire extent with respect </span>
<span class="co"># to each validation group.</span>
<span class="co"># We use the bb.buf (bounding box buffer) argument to zoom in to our study extent.</span>
<span class="fu"><a href="../reference/evalplot.envSim.map.html">evalplot.envSim.map</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, envs <span class="op">=</span> <span class="va">envs</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                    bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">bg.grp</span>, 
                    categoricals <span class="op">=</span> <span class="st">"biome"</span>, bb.buf <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.block-6.png" width="672"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.envSim.map.html">evalplot.envSim.map</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"most_diff"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, envs <span class="op">=</span> <span class="va">envs</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                    bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">bg.grp</span>, 
                    categoricals <span class="op">=</span> <span class="st">"biome"</span>, bb.buf <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.block-7.png" width="672"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.envSim.map.html">evalplot.envSim.map</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"most_sim"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, envs <span class="op">=</span> <span class="va">envs</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                    bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">block</span><span class="op">$</span><span class="va">bg.grp</span>, 
                    categoricals <span class="op">=</span> <span class="st">"biome"</span>, bb.buf <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.block-8.png" width="672"></p>
</div>
<div id="cb1" class="section level4">
<h4 class="hasAnchor">
<a href="#cb1" class="anchor"></a>2. Checkerboard1</h4>
<p>The next two partitioning methods are variants of a ‘checkerboard’ approach to partition occurrence localities (Radosavljevic &amp; Anderson 2014). These generate checkerboard grids across the study extent and partition the localities into groups based on where they fall on the checkerboard. In contrast to the block method, both checkerboard methods subdivide geographic space equally but do not ensure a balanced number of occurrence localities in each bin. For these methods, the user needs to provide a raster layer on which to base the underlying checkerboard pattern. Here we simply use the predictor variable RasterStack. Additionally, the user needs to define an <em>aggregation.factor</em>. This value specifies the number of grids cells to aggregate when making the underlying checkerboard pattern.</p>
<p>The checkerboard1 method partitions the points into <em>k</em> = 2 spatial groups using a simple checkerboard pattern.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cb1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/partitions.html">get.checkerboard1</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">envs.bg</span>, <span class="va">bg</span>, aggregation.factor<span class="op">=</span><span class="fl">5</span><span class="op">)</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">occs</span>, pts.grp <span class="op">=</span> <span class="va">cb1</span><span class="op">$</span><span class="va">occs.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck1-1.png" width="672"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Plotting the background points shows the checkerboard pattern clearly.</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">bg</span>, pts.grp <span class="op">=</span> <span class="va">cb1</span><span class="op">$</span><span class="va">bg.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck1-2.png" width="672"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We can see from the MESS maps that this method results in similar environmental </span>
<span class="co"># representation between the partitions.</span>
<span class="fu"><a href="../reference/evalplot.envSim.hist.html">evalplot.envSim.hist</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, bg.z <span class="op">=</span> <span class="va">bg.z</span>, 
                     occs.grp <span class="op">=</span> <span class="va">cb1</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">cb1</span><span class="op">$</span><span class="va">bg.grp</span>, categoricals <span class="op">=</span> <span class="st">"biome"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck1-3.png" width="672"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.envSim.map.html">evalplot.envSim.map</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, envs <span class="op">=</span> <span class="va">envs</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                    bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="va">cb1</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">cb1</span><span class="op">$</span><span class="va">bg.grp</span>, 
                    categoricals <span class="op">=</span> <span class="st">"biome"</span>, bb.buf <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck1-4.png" width="672"></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We can increase the aggregation factor to give the groups bigger boxes.</span>
<span class="co"># This can result in groups that are more environmentally different from each other.</span>
<span class="va">cb1.large</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/partitions.html">get.checkerboard1</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">envs.bg</span>, <span class="va">bg</span>, aggregation.factor<span class="op">=</span><span class="fl">30</span><span class="op">)</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">occs</span>, pts.grp <span class="op">=</span> <span class="va">cb1.large</span><span class="op">$</span><span class="va">occs.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck1-5.png" width="672"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">bg</span>, pts.grp <span class="op">=</span> <span class="va">cb1.large</span><span class="op">$</span><span class="va">bg.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck1-6.png" width="672"></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.envSim.hist.html">evalplot.envSim.hist</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                     bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="va">cb1.large</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">cb1</span><span class="op">$</span><span class="va">bg.grp</span>, 
                     categoricals <span class="op">=</span> <span class="st">"biome"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck1-7.png" width="672"></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.envSim.map.html">evalplot.envSim.map</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, envs <span class="op">=</span> <span class="va">envs</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                    bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="va">cb1.large</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">cb1</span><span class="op">$</span><span class="va">bg.grp</span>, 
                    categoricals <span class="op">=</span> <span class="st">"biome"</span>, bb.buf <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck1-8.png" width="672"></p>
</div>
<div id="cb2" class="section level4">
<h4 class="hasAnchor">
<a href="#cb2" class="anchor"></a>3. Checkerboard2</h4>
<p>The Checkerboard2 method partitions the data into <em>k</em> = 4 spatial groups. This is done by hierarchically aggregating the input raster at two scales. Presence and background groups are assigned based on which box they fall into on the hierarchical checkerboard.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cb2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/partitions.html">get.checkerboard2</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">envs.bg</span>, <span class="va">bg</span>, aggregation.factor<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">occs</span>, pts.grp <span class="op">=</span> <span class="va">cb2</span><span class="op">$</span><span class="va">occs.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck2-1.png" width="672"></p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Plotting the background points shows the checkerboard pattern very clearly.</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">bg</span>, pts.grp <span class="op">=</span> <span class="va">cb2</span><span class="op">$</span><span class="va">bg.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck2-2.png" width="672"></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Different from checkerboard1, some partitions here do show some difference</span>
<span class="co"># in environmental representation, but not as consistently different as with block.</span>
<span class="fu"><a href="../reference/evalplot.envSim.hist.html">evalplot.envSim.hist</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                     bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="va">cb2</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">cb2</span><span class="op">$</span><span class="va">bg.grp</span>, 
                     categoricals <span class="op">=</span> <span class="st">"biome"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck2-3.png" width="672"></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.envSim.map.html">evalplot.envSim.map</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, envs <span class="op">=</span> <span class="va">envs</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                    bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="va">cb2</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">cb2</span><span class="op">$</span><span class="va">bg.grp</span>, 
                    categoricals <span class="op">=</span> <span class="st">"biome"</span>, bb.buf <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ck2-4.png" width="672"></p>
</div>
<div id="jack" class="section level4">
<h4 class="hasAnchor">
<a href="#jack" class="anchor"></a>4. Jackknife (leave-one-out)</h4>
<p>The next two methods differ from the first three in that (a) they do not partition the background points into different groups (meaning that the full background is used to evaluate each partition), and (b) they do not account for spatial autocorrelation between validation and training localities. Primarily when working with relatively small data sets (e.g. &lt; ca. 25 presence localities), users may choose a special case of <em>k</em>-fold cross-validation where the number of bins (<em>k</em>) is equal to the number of occurrence localities (<em>n</em>) in the data set (Pearson et al. 2007; Shcheglovitova &amp; Anderson 2013). This is referred to as jackknife, or leave-one-out, partitioning (Hastie et al. 2009). As <em>n</em> models are processed with this partitioning method, the computation time could be long for large occurrence datasets.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">jack</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/partitions.html">get.jackknife</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">bg</span><span class="op">)</span>
<span class="co"># If the number of input points is larger than 10, the legend for the groups </span>
<span class="co"># is suppressed.</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">occs</span>, pts.grp <span class="op">=</span> <span class="va">jack</span><span class="op">$</span><span class="va">occs.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.jk-1.png" width="672"></p>
</div>
<div id="rand" class="section level4">
<h4 class="hasAnchor">
<a href="#rand" class="anchor"></a>5. Random k-fold</h4>
<p>The ‘random k-fold’ method partitions occurrence localities randomly into a user-specified number of (<em>k</em>) bins (Hastie et al. 2009). This method is equivalent to the ‘cross-validate’ partitioning scheme available in the current version of the Maxent software GUI. Especially with larger occurrence datasets, this partitioning method could randomly result in some spatial clustering of groups, which is why spatial partitioning methods are preferable for addressing spatial autocorrelation (Roberts et al. 2017). Below, we partition the data into five random groups.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rand</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/partitions.html">get.randomkfold</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">bg</span>, k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">occs</span>, pts.grp <span class="op">=</span> <span class="va">rand</span><span class="op">$</span><span class="va">occs.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.rand-1.png" width="672"></p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># As the partitions are random, there is no large environmental difference between them.</span>
<span class="fu"><a href="../reference/evalplot.envSim.hist.html">evalplot.envSim.hist</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                     bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="va">rand</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">rand</span><span class="op">$</span><span class="va">bg.grp</span>, 
                     categoricals <span class="op">=</span> <span class="st">"biome"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.rand-2.png" width="672"></p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.envSim.map.html">evalplot.envSim.map</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, envs <span class="op">=</span> <span class="va">envs</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                    bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="va">rand</span><span class="op">$</span><span class="va">occs.grp</span>, bg.grp <span class="op">=</span> <span class="va">rand</span><span class="op">$</span><span class="va">bg.grp</span>, 
                    categoricals <span class="op">=</span> <span class="st">"biome"</span>, bb.buf <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.rand-3.png" width="672"></p>
</div>
<div id="testing" class="section level4">
<h4 class="hasAnchor">
<a href="#testing" class="anchor"></a>6. Fully Withheld Testing Data</h4>
<p>The ‘testing’ method evaluates the model on a fully withheld testing dataset that is not used to create the full model (i.e., not included in the training data), meaning that cross validation statistics are not calculated. Evaluations with fully withheld testing data have been shown to result in models with better transferability (Soley-Guardia et al. 2019).</p>
<p>To illustrate this, we will make a table containing occurrences representing both training data and fully withheld testing data (which we simulate) and plot the partitions in the same way as above. However, the testing data (group 2) will not become training data for a new model. Instead, the training data (group 1) is used to make the model, and the testing data (group 2) are used only to evaluate it. Thus, the background extent does not include the testing data (a few points fall inside this extent because of the buffer we applied, but they are not used as training data).</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First, let's specify a fake testing occurrence dataset and plot the testing points with </span>
<span class="co"># the rest of our data</span>
<span class="va">occs.testing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>longitude <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">55</span>, <span class="fl">65</span><span class="op">)</span>, latitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">10</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">occs.testing</span><span class="op">)</span>, 
              pts.grp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">occs.testing</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ind-1.png" width="672"></p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Next, let's extract the predictor variable values for our testing points.</span>
<span class="va">occs.testing.z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">occs.testing</span>, <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extract.html">extract</a></span><span class="op">(</span><span class="va">envs</span>, <span class="va">occs.testing</span><span class="op">)</span><span class="op">)</span>
<span class="co"># We use the same background groups as random partitions here because the background used </span>
<span class="co"># for testing data is also from the full study extent. We use here the occs.testing.z </span>
<span class="co"># parameter to add information for our testing localities, and we set the partitions </span>
<span class="co"># for occurrences all to zero (as no partitioning is done).</span>
<span class="fu"><a href="../reference/evalplot.envSim.hist.html">evalplot.envSim.hist</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                     bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span><span class="op">)</span>, bg.grp <span class="op">=</span> <span class="va">rand</span><span class="op">$</span><span class="va">bg.grp</span>, 
                     categoricals <span class="op">=</span> <span class="st">"biome"</span>, occs.testing.z <span class="op">=</span> <span class="va">occs.testing.z</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ind-2.png" width="672"></p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.envSim.map.html">evalplot.envSim.map</a></span><span class="op">(</span>sim.type <span class="op">=</span> <span class="st">"mess"</span>, ref.data <span class="op">=</span> <span class="st">"occs"</span>, envs <span class="op">=</span> <span class="va">envs</span>, occs.z <span class="op">=</span> <span class="va">occs.z</span>, 
                    bg.z <span class="op">=</span> <span class="va">bg.z</span>, occs.grp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span><span class="op">)</span>, bg.grp <span class="op">=</span> <span class="va">rand</span><span class="op">$</span><span class="va">bg.grp</span>, 
                    categoricals <span class="op">=</span> <span class="st">"biome"</span>, bb.buf <span class="op">=</span> <span class="fl">7</span>, occs.testing.z <span class="op">=</span> <span class="va">occs.testing.z</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.ind-3.png" width="672"></p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We can see what is to be expected -- the testing dataset is much more restricted </span>
<span class="co"># environmentally than the training data, and thus is much more difference with the </span>
<span class="co"># study extent.</span></code></pre></div>
</div>
<div id="user" class="section level4">
<h4 class="hasAnchor">
<a href="#user" class="anchor"></a>7. User-defined</h4>
<p>For maximum flexibility, the last partitioning method is designed so that users can define <em>a priori</em> partitions. This provides a flexible way to conduct spatially-independent cross-validation with background masking. For example, we demonstrate partitioning the occurrence data based on <em>k</em>-means groups. The user-defined partition option can also be used to input partition groups derived from other sources.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Here we run a k-means clustering algorithm to group our occurrences into discrete spatial </span>
<span class="co"># groups based on their coordinates.</span>
<span class="va">grp.n</span> <span class="op">&lt;-</span> <span class="fl">6</span>
<span class="va">kmeans</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/kmeans.html">kmeans</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">grp.n</span><span class="op">)</span>
<span class="va">occs.grp</span> <span class="op">&lt;-</span> <span class="va">kmeans</span><span class="op">$</span><span class="va">cluster</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">occs</span>, pts.grp <span class="op">=</span> <span class="va">occs.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.user1-1.png" width="672"></p>
<p>When using the user-defined partitioning method, we need to supply <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code> with group identifiers for both occurrence AND background records If we want to use all background records for each group, we can set the background to zero.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Assign all background records</span>
<span class="va">bg.grp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">bg</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">bg</span>, pts.grp <span class="op">=</span> <span class="va">bg.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.user2-1.png" width="672"></p>
<p>Alternatively, we may think of various ways to partition background data. This depends on the goals of the study but we might, for example, find it reasonable to partition background records by assigning groups based on distance to the centroids of the occurrence clusters.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Here we find the centers of the occurrence k-means clusters and calculate the spatial </span>
<span class="co"># distance of each background point to them. We then find which center had the minimum </span>
<span class="co"># distance for each record and assign that record to this centroid group.</span>
<span class="va">centers</span> <span class="op">&lt;-</span> <span class="va">kmeans</span><span class="op">$</span><span class="va">center</span>
<span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/pointDistance.html">pointDistance</a></span><span class="op">(</span><span class="va">bg</span>, <span class="va">centers</span>, lonlat <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">bg.grp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">d</span>, <span class="fl">1</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">bg</span>, pts.grp <span class="op">=</span> <span class="va">bg.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/part.user3-1.png" width="672"></p>
<p>We can also use other packages to partition our data. As an example, we next show how to use the R package <a href="https://CRAN.R-project.org/package=blockCV"><code>blockCV</code></a> (Valavi et al. 2019) to generate spatial partitions to input into <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code>. We use the <code><a href="https://rdrr.io/pkg/blockCV/man/spatialBlock.html">spatialBlock()</a></code> function to generate blocks similar to the checkerboard partition in <code>ENMeval</code>, except that we choose here to select partitions randomly over these blocks. This package offers other kinds of block partitioning methods as well. Using other packages in this way expands the variety of partitions you can use to evaluate models in <code>ENMeval</code>, and we highly encourage experimenting with a plurality of tools.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rvalavi/blockCV">blockCV</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>

<span class="co"># First, we convert our occurrence and background records to spatial point data with the </span>
<span class="co"># package sf and assign the correct coordinate reference system.</span>
<span class="va">occsBg.sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">bg</span><span class="op">)</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"longitude"</span>,<span class="st">"latitude"</span><span class="op">)</span>, 
                          crs <span class="op">=</span> <span class="st">"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"</span><span class="op">)</span>
<span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/projection.html">crs</a></span><span class="op">(</span><span class="va">envs.bg</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/projection.html">crs</a></span><span class="op">(</span><span class="va">occsBg.sf</span><span class="op">)</span>
<span class="co"># Here, we implement the spatialBlock function from the blockCV package.</span>
<span class="co"># The required inputs are similar to ENMeval partitioning functions, but here you assign</span>
<span class="co"># the size of blocks in meters with the argument theRange (here set at 1000 km), and the </span>
<span class="co"># partition selection method can be assigned as either "checkerboard" or "random"</span>
<span class="co"># In addition, the spatialBlock function returns a map showing the different </span>
<span class="co"># spatial partitions.</span>
<span class="va">sb</span> <span class="op">&lt;-</span> <span class="fu">blockCV</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/blockCV/man/spatialBlock.html">spatialBlock</a></span><span class="op">(</span>speciesData <span class="op">=</span> <span class="va">occsBg.sf</span>, rasterLayer <span class="op">=</span> <span class="va">envs.bg</span>, 
                            theRange <span class="op">=</span> <span class="fl">1000000</span>, k <span class="op">=</span> <span class="fl">5</span>, selection <span class="op">=</span> <span class="st">"random"</span><span class="op">)</span>
<span class="co">#&gt; The best folds was in iteration 47:</span>
<span class="co">#&gt;   train test</span>
<span class="co">#&gt; 1  3082  700</span>
<span class="co">#&gt; 2  3099  683</span>
<span class="co">#&gt; 3  2973  809</span>
<span class="co">#&gt; 4  3103  679</span>
<span class="co">#&gt; 5  2871  911</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/unnamed-chunk-2-1.png" width="672"></p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We can pull out the partition information from the SpatialBlock object to assemble</span>
<span class="co"># occs.grp and bg.grp, which can be used for plotting or as user.grp inputs for ENMevaluate.</span>
<span class="va">occs.grp</span> <span class="op">&lt;-</span> <span class="va">sb</span><span class="op">$</span><span class="va">foldID</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span><span class="op">]</span>
<span class="va">bg.grp</span> <span class="op">&lt;-</span> <span class="va">sb</span><span class="op">$</span><span class="va">foldID</span><span class="op">[</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">sb</span><span class="op">$</span><span class="va">foldID</span><span class="op">)</span><span class="op">]</span>
<span class="fu"><a href="../reference/evalplot.grps.html">evalplot.grps</a></span><span class="op">(</span>pts <span class="op">=</span> <span class="va">bg</span>, pts.grp <span class="op">=</span> <span class="va">bg.grp</span>, envs <span class="op">=</span> <span class="va">envs.bg</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/unnamed-chunk-2-2.png" width="672"></p>
<p>Selecting which of these data partitioning methods to use should be based on the research objectives and the characteristics of the study system. Refer to the <a href="#resources">References and Resources</a> section for studies and resources to consult for more information concerning partitioning for model evaluation.</p>
</div>
</div>
<div id="eval" class="section level2">
<h2 class="hasAnchor">
<a href="#eval" class="anchor"></a>Running ENMeval</h2>
<p>Once we decide which method of data partitioning we would like to use, we are ready to start building models. We now move on to the main function in <code>ENMeval</code>: <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code>.</p>
<div id="initial-considerations" class="section level4">
<h4 class="hasAnchor">
<a href="#initial-considerations" class="anchor"></a>Initial considerations</h4>
<p>Although any algorithm can potentially be specified in ENMeval 2.0.0 (see below), and <code>ENMeval</code> 2.0.0 has built-in implementations for Maxent and BIOCLIM, we will explain here the tuning procedure for Maxent models (either <code>maxent.jar</code> or <code>maxnet</code>). For Maxent models (Phillips et al. 2006, Phillips et al. 2008, Phillips et al. 2017), the two main parameters to tune when calling <code>ENMevaluate</code> are (1) the range of regularization multiplier values and (2) the combinations of feature classes (Elith et al. 2011, Merow et al. 2013). The <strong><em>regularization multiplier</em></strong> (RM) determines the penalty associated with including variables or their transformations in the model. Higher RM values impose a stronger penalty on model complexity and thus result in simpler (<em>flatter</em>) model predictions. The <strong><em>feature classes</em></strong> determine the potential shape of the marginal response curves. A model that is only allowed to include linear feature classes will most likely be simpler than a model that is allowed to include all possible feature classes. A more detailed description of these parameters is available in the <a href="#resources">References and Resources</a> section. For the purposes of this vignette, we demonstrate simply how to adjust these parameters. The following section deals with comparing the outputs of each model.</p>
<p>Unless you supply the function with background points (which is recommended in many cases), you will need to define how many background points should be used with the <code>n.bg</code> argument. If any of your predictor variables are categorical (e.g., biomes in this dataset), you should define which layer(s) these are using the ‘categoricals’ argument or assign them as factors in the RasterStack or input table (like we did here).</p>
<p><code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code> builds a separate model for each unique combination of RM values and feature class combinations. For example, the following call will build and evaluate 2 models. One with RM=1 and another with RM=2, both allowing only linear features.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">e.mx.l</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ENMevaluate.html">ENMevaluate</a></span><span class="op">(</span>occs <span class="op">=</span> <span class="va">occs</span>, envs <span class="op">=</span> <span class="va">envs</span>, bg <span class="op">=</span> <span class="va">bg</span>, 
                      algorithm <span class="op">=</span> <span class="st">'maxnet'</span>, partitions <span class="op">=</span> <span class="st">'block'</span>, 
                      tune.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fc <span class="op">=</span> <span class="st">"L"</span>, rm <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">e.mx.l</span>
<span class="co">#&gt; An object of class:  ENMevaluation </span>
<span class="co">#&gt;  occurrence/background points:  86 / 3696 </span>
<span class="co">#&gt;  partition method:  block </span>
<span class="co">#&gt;  partition settings:  orientation = lat_lon </span>
<span class="co">#&gt;  clamp:  TRUE </span>
<span class="co">#&gt;  clamp directions:  left: bio1, bio12, bio16, bio17, bio5, bio6, bio7, bio8, biome</span>
<span class="co">#&gt;                     right: bio1, bio12, bio16, bio17, bio5, bio6, bio7, bio8, biome </span>
<span class="co">#&gt;  algorithm:  maxnet </span>
<span class="co">#&gt;  tune settings:  fc: L</span>
<span class="co">#&gt;                  rm: 1,2 </span>
<span class="co">#&gt;  overlap:  TRUE </span>
<span class="co">#&gt; Refer to ?ENMevaluation for information on slots.</span></code></pre></div>
<p>We may, however, want to compare a wider range of models that can use a wider variety of feature classes and regularization multipliers:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">e.mx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ENMevaluate.html">ENMevaluate</a></span><span class="op">(</span>occs <span class="op">=</span> <span class="va">occs</span>, envs <span class="op">=</span> <span class="va">envs</span>, bg <span class="op">=</span> <span class="va">bg</span>, 
                    algorithm <span class="op">=</span> <span class="st">'maxnet'</span>, partitions <span class="op">=</span> <span class="st">'block'</span>, 
                    tune.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"L"</span>,<span class="st">"LQ"</span>,<span class="st">"LQH"</span>,<span class="st">"H"</span><span class="op">)</span>, rm <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">e.mx</span>
<span class="co">#&gt; An object of class:  ENMevaluation </span>
<span class="co">#&gt;  occurrence/background points:  86 / 3696 </span>
<span class="co">#&gt;  partition method:  block </span>
<span class="co">#&gt;  partition settings:  orientation = lat_lon </span>
<span class="co">#&gt;  clamp:  TRUE </span>
<span class="co">#&gt;  clamp directions:  left: bio1, bio12, bio16, bio17, bio5, bio6, bio7, bio8, biome</span>
<span class="co">#&gt;                     right: bio1, bio12, bio16, bio17, bio5, bio6, bio7, bio8, biome </span>
<span class="co">#&gt;  algorithm:  maxnet </span>
<span class="co">#&gt;  tune settings:  fc: L,LQ,LQH,H</span>
<span class="co">#&gt;                  rm: 1,2,3,4,5 </span>
<span class="co">#&gt;  overlap:  TRUE </span>
<span class="co">#&gt; Refer to ?ENMevaluation for information on slots.</span></code></pre></div>
<p>When building many models, the function may take a long time to run. Of course this depends on the size of your dataset and the computer you are using. When working on big projects, running the command in parallel (<code>parallel=TRUE</code>) can be considerably faster. Note that running parallel can also be slower when working on small datasets.</p>
<p>We can also calculate one of two niche overlap statistics while running <code>ENMevaluate</code> by setting the arguments <code>overlap=TRUE</code> and <code>overlapStat</code>, which support Moran’s I or Schoener’s D (Warren et al. 2008). Note that you can also calculate this value at a later stage using the separate <code><a href="../reference/calc.niche.overlap.html">calc.niche.overlap()</a></code> function.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">overlap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc.niche.overlap.html">calc.niche.overlap</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">@</span><span class="va">predictions</span>, overlapStat <span class="op">=</span> <span class="st">"D"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">overlap</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="op">]</span>
<span class="co">#&gt;             fc.L_rm.1 fc.LQ_rm.1 fc.LQH_rm.1 fc.H_rm.1 fc.L_rm.2 fc.LQ_rm.2</span>
<span class="co">#&gt; fc.L_rm.1          NA         NA          NA        NA        NA         NA</span>
<span class="co">#&gt; fc.LQ_rm.1  0.9069237         NA          NA        NA        NA         NA</span>
<span class="co">#&gt; fc.LQH_rm.1 0.8331298  0.8642754          NA        NA        NA         NA</span>
<span class="co">#&gt; fc.H_rm.1   0.8086977  0.8261852   0.9353240        NA        NA         NA</span>
<span class="co">#&gt; fc.L_rm.2   0.9613834  0.8907949   0.8242755 0.8106047        NA         NA</span>
<span class="co">#&gt;             fc.LQH_rm.2 fc.H_rm.2 fc.L_rm.3 fc.LQ_rm.3 fc.LQH_rm.3 fc.H_rm.3</span>
<span class="co">#&gt; fc.L_rm.1            NA        NA        NA         NA          NA        NA</span>
<span class="co">#&gt; fc.LQ_rm.1           NA        NA        NA         NA          NA        NA</span>
<span class="co">#&gt; fc.LQH_rm.1          NA        NA        NA         NA          NA        NA</span>
<span class="co">#&gt; fc.H_rm.1            NA        NA        NA         NA          NA        NA</span>
<span class="co">#&gt; fc.L_rm.2            NA        NA        NA         NA          NA        NA</span>
<span class="co">#&gt;             fc.L_rm.4 fc.LQ_rm.4 fc.LQH_rm.4 fc.H_rm.4 fc.L_rm.5 fc.LQ_rm.5</span>
<span class="co">#&gt; fc.L_rm.1          NA         NA          NA        NA        NA         NA</span>
<span class="co">#&gt; fc.LQ_rm.1         NA         NA          NA        NA        NA         NA</span>
<span class="co">#&gt; fc.LQH_rm.1        NA         NA          NA        NA        NA         NA</span>
<span class="co">#&gt; fc.H_rm.1          NA         NA          NA        NA        NA         NA</span>
<span class="co">#&gt; fc.L_rm.2          NA         NA          NA        NA        NA         NA</span>
<span class="co">#&gt;             fc.LQH_rm.5 fc.H_rm.5</span>
<span class="co">#&gt; fc.L_rm.1            NA        NA</span>
<span class="co">#&gt; fc.LQ_rm.1           NA        NA</span>
<span class="co">#&gt; fc.LQH_rm.1          NA        NA</span>
<span class="co">#&gt; fc.H_rm.1            NA        NA</span>
<span class="co">#&gt; fc.L_rm.2            NA        NA</span></code></pre></div>
</div>
<div id="different-parameterizations" class="section level4">
<h4 class="hasAnchor">
<a href="#different-parameterizations" class="anchor"></a>Different parameterizations</h4>
<p>There are multiple ways to run the function <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code>, and we will go over how to specify each parameterization and what the effects are on the results.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># If maxent.jar is installed and rJava loads properly, you can also run Maxent with </span>
<span class="co"># the original Java software.</span>
<span class="va">tune.args</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"L"</span>, <span class="st">"LQ"</span><span class="op">)</span>, rm <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>
<span class="va">e.mxjar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ENMevaluate.html">ENMevaluate</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">envs</span>, <span class="va">bg</span>, algorithm <span class="op">=</span> <span class="st">"maxent.jar"</span>, 
                       tune.args <span class="op">=</span> <span class="va">tune.args</span>, partitions <span class="op">=</span> <span class="st">"block"</span><span class="op">)</span>

<span class="co"># 2. Testing partition: no cross validation statistics calculated; instead, model will be </span>
<span class="co"># evaluated on a testing dataset that is not used to create the full model.</span>
<span class="va">e.test</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ENMevaluate.html">ENMevaluate</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">envs</span>, <span class="va">bg</span>, algorithm <span class="op">=</span> <span class="st">"maxnet"</span>, 
                      tune.args <span class="op">=</span> <span class="va">tune.args</span>, partitions <span class="op">=</span> <span class="st">"testing"</span>, 
                      occs.testing <span class="op">=</span> <span class="va">occs.testing</span><span class="op">)</span>

<span class="co"># 3. User partitions.</span>
<span class="va">user.grp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>occs.grp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">occs</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, 
                 bg.grp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">bg</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">e.user</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ENMevaluate.html">ENMevaluate</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">envs</span>, <span class="va">bg</span>, algorithm <span class="op">=</span> <span class="st">"maxnet"</span>, 
                      tune.args <span class="op">=</span> <span class="va">tune.args</span>, partitions <span class="op">=</span> <span class="st">"user"</span>, user.grp <span class="op">=</span> <span class="va">user.grp</span><span class="op">)</span>

<span class="co"># 4. No partitions: no cross validation statistics calculated, nor any model </span>
<span class="co"># evaluation on test data.</span>
<span class="va">e.noCV</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ENMevaluate.html">ENMevaluate</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">envs</span>, <span class="va">bg</span>, algorithm <span class="op">=</span> <span class="st">"maxnet"</span>, 
                      tune.args <span class="op">=</span> <span class="va">tune.args</span>, partitions <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>

<span class="co"># 5. No raster data (a.k.a, samples with data, or SWD): no full model raster predictions </span>
<span class="co"># created, so will run faster; also, both cbi.train and cbi.val will be calculated on the </span>
<span class="co"># point data (training and validation background) instead of on the "envs" rasters (default).</span>
<span class="co"># For this implementation, assigning the categorical variable to factor with the argument </span>
<span class="co"># "categoricals" is easier, as ENMevaluate() internally assigns the levels based on both </span>
<span class="co"># occs and bg, avoiding any errors associated with different factor levels when combining data.</span>
<span class="va">occs.z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">occs</span>, <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extract.html">extract</a></span><span class="op">(</span><span class="va">envs</span>, <span class="va">occs</span><span class="op">)</span><span class="op">)</span>
<span class="va">bg.z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">bg</span>, <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extract.html">extract</a></span><span class="op">(</span><span class="va">envs</span>, <span class="va">bg</span><span class="op">)</span><span class="op">)</span>
<span class="va">e.swd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ENMevaluate.html">ENMevaluate</a></span><span class="op">(</span><span class="va">occs.z</span>, bg <span class="op">=</span> <span class="va">bg.z</span>, algorithm <span class="op">=</span> <span class="st">"maxnet"</span>, tune.args <span class="op">=</span> <span class="va">tune.args</span>, 
                     partitions <span class="op">=</span> <span class="st">"block"</span><span class="op">)</span></code></pre></div>
<p>You can also specify your own custom validation statistics for <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code> to calculate and report in the results tables. This is done by defining a custom function that has the arguments shown below, which are used by the internal function <code><a href="../reference/tune.enm.html">tune.validate()</a></code>. Here, we add functionality to calculate the AUC ratio and associated p-value for the partial ROC perfomance metric, defined in (Peterson et al. 2008) and implemented by the R package <code>kuenm</code> (Cobos et al. 2019), which is currently only available on Github.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First, make sure you install kuenm from Github.</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"marlonecobos/kuenm"</span><span class="op">)</span>
<span class="co"># Define a custom function that implements a performance metric not included in ENMeval.</span>
<span class="co"># The function should have a single argument "vars", which is a list that includes the </span>
<span class="co"># data most performance metrics should require -- the total list of these data can be found </span>
<span class="co"># here: ?ENMevaluate. Make sure you return a data frame that specifies the names you want to </span>
<span class="co"># see in the results tables.</span>
<span class="va">proc</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">vars</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">proc</span> <span class="op">&lt;-</span> <span class="fu">kuenm</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kuenm/man/kuenm_proc.html">kuenm_proc</a></span><span class="op">(</span><span class="va">vars</span><span class="op">$</span><span class="va">occs.val.pred</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">vars</span><span class="op">$</span><span class="va">bg.train.pred</span>, <span class="va">vars</span><span class="op">$</span><span class="va">bg.val.pred</span><span class="op">)</span><span class="op">)</span>
  <span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>proc_auc_ratio <span class="op">=</span> <span class="va">proc</span><span class="op">$</span><span class="va">pROC_summary</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, 
                    proc_pval <span class="op">=</span> <span class="va">proc</span><span class="op">$</span><span class="va">pROC_summary</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, row.names <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># Now we can run ENMevaluate() with the argument "user.eval", and simply give it the </span>
<span class="co"># custom function.</span>
<span class="va">e.mx.proc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ENMevaluate.html">ENMevaluate</a></span><span class="op">(</span><span class="va">occs</span>, <span class="va">envs</span>, <span class="va">bg</span>, algorithm <span class="op">=</span> <span class="st">"maxnet"</span>, 
                         tune.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fc <span class="op">=</span> <span class="st">"L"</span>, rm <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>, 
                         partitions <span class="op">=</span> <span class="st">"block"</span>, user.eval <span class="op">=</span> <span class="va">proc</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We can see the new performance statistic averages in the results and </span>
<span class="co"># results.partitions tables.</span>
<span class="va">e.mx.proc</span><span class="op">@</span><span class="va">results</span>
<span class="co">#&gt;   fc rm tune.args auc.train cbi.train auc.diff.avg auc.diff.sd auc.val.avg</span>
<span class="co">#&gt; 1  L  1 fc.L_rm.1 0.8745683     0.926   0.07986244  0.04406351   0.8591106</span>
<span class="co">#&gt; 2  L  2 fc.L_rm.2 0.8744404     0.934   0.08009704  0.04090725   0.8603552</span>
<span class="co">#&gt;   auc.val.sd cbi.val.avg cbi.val.sd or.10p.avg or.10p.sd or.mtp.avg or.mtp.sd</span>
<span class="co">#&gt; 1 0.07327265      0.7775  0.1260410  0.1517210 0.1611428 0.10869565 0.1304348</span>
<span class="co">#&gt; 2 0.07288020      0.7510  0.1711568  0.1734601 0.1980550 0.09782609 0.1143459</span>
<span class="co">#&gt;   proc_auc_ratio.avg proc_auc_ratio.sd proc_pval.avg proc_pval.sd     AICc</span>
<span class="co">#&gt; 1           2.213807         0.1497749             0            0 1579.307</span>
<span class="co">#&gt; 2           2.192230         0.1330264             0            0 1571.192</span>
<span class="co">#&gt;   delta.AICc     w.AIC ncoef</span>
<span class="co">#&gt; 1    8.11448 0.0170026     6</span>
<span class="co">#&gt; 2    0.00000 0.9829974     6</span>
<span class="va">e.mx.proc</span><span class="op">@</span><span class="va">results.partitions</span>
<span class="co">#&gt;   tune.args fold   auc.val   auc.diff cbi.val    or.mtp     or.10p</span>
<span class="co">#&gt; 1 fc.L_rm.1    1 0.8888176 0.02294783   0.786 0.0000000 0.04166667</span>
<span class="co">#&gt; 2 fc.L_rm.1    2 0.8178372 0.06896667   0.672 0.1739130 0.21739130</span>
<span class="co">#&gt; 3 fc.L_rm.1    3 0.9469114 0.10461157   0.952 0.0000000 0.00000000</span>
<span class="co">#&gt; 4 fc.L_rm.1    4 0.7828763 0.12292367   0.700 0.2608696 0.34782609</span>
<span class="co">#&gt; 5 fc.L_rm.2    1 0.8910421 0.02809108   0.788 0.0000000 0.04166667</span>
<span class="co">#&gt; 6 fc.L_rm.2    2 0.8182386 0.06850754   0.648 0.1739130 0.21739130</span>
<span class="co">#&gt; 7 fc.L_rm.2    3 0.9471680 0.10297619   0.976 0.0000000 0.00000000</span>
<span class="co">#&gt; 8 fc.L_rm.2    4 0.7849721 0.12081335   0.592 0.2173913 0.43478261</span>
<span class="co">#&gt;   proc_auc_ratio proc_pval</span>
<span class="co">#&gt; 1       2.256309         0</span>
<span class="co">#&gt; 2       2.310808         0</span>
<span class="co">#&gt; 3       1.991820         0</span>
<span class="co">#&gt; 4       2.296292         0</span>
<span class="co">#&gt; 5       2.214087         0</span>
<span class="co">#&gt; 6       2.278199         0</span>
<span class="co">#&gt; 7       1.997949         0</span>
<span class="co">#&gt; 8       2.278685         0</span></code></pre></div>
<p>Yet another way to run <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code> is by specifying a new algorithm using the <code>ENMdetails</code> object. Built-in algorithms (maxent.jar, maxnet, BIOCLIM) are implemented as <code>ENMdetails</code> objects—they can be found in the /R folder of the package with the file name “enm.name”, where “name” is the algorithm. The <code>ENMdetails</code> object specifies the way <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code> should run the algorithm. It has some simple functions that output 1) the algorithm’s name, 2) the function that runs the algorithm, 3) particular messages or errors, 4) the arguments for the model’s function, 5) a specific parameterization of the <code><a href="https://rdrr.io/pkg/raster/man/predict.html">predict()</a></code> function, 6) the number of non-zero model coefficients, and 7) the variable importance table (if one is available from the model object).</p>
<p>Users can construct their own <code>ENMdetails</code> object using the built-in ones as guides. For example, a user can copy the “enm.maxnet.R” script, modify the code to specify a different model, save it as a new script in the /R folder with the name “enm.myAlgorithm”, and use it to run <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code>. To be able to specify the model with the <code>algorithm</code> argument in <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code>, a small modification needs to be made to add it to list in the <code><a href="../reference/lookup.enm.html">lookup.enm()</a></code> internal function found in “R/utilities.R”. We plan to work with other research groups to identify best practices for tuning other algorithms with presence-background/pseudoabsence data and implement new algorithms in ENMeval in the future.</p>
</div>
<div id="exploring-the-results" class="section level4">
<h4 class="hasAnchor">
<a href="#exploring-the-results" class="anchor"></a>Exploring the results</h4>
<p>Now let’s take a look at the output from <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code>, which is an <code>ENMevaluation</code> object, in more detail (also see <code><a href="../reference/ENMevaluation-class.html">?ENMevaluation</a></code>). It contains the following slots:</p>
<ul>
<li>
<code>algorithm</code> A character vector showing which algorithm was used</li>
<li>
<code>tune.settings</code> A data.frame of settings that were tuned</li>
<li>
<code>partition.method</code> A character of partitioning method used</li>
<li>
<code>partition.settings</code> A list of partition settings used (i.e., value of <em>k</em> or aggregation factor)</li>
<li>
<code>other.settings</code> A list of other modeling settings used (i.e., decisions about clamping, AUC diff calculation)</li>
<li>
<code>doClamp</code> A logical indicating whether or not clamping was used</li>
<li>
<code>clamp.directions</code> A list of the clamping directions specified</li>
<li>
<code>results</code> A data.frame of evaluation summary statistics</li>
<li>
<code>results.partitions</code> A data.frame of evaluation k-fold statistics</li>
<li>
<code>models</code> A list of model objects</li>
<li>
<code>variable.importance</code> A list of data frames with variable importance for each model (when applicable)</li>
<li>
<code>predictions</code> A RasterStack of model predictions</li>
<li>
<code>taxon.name</code> A character for taxon name (when specified)</li>
<li>
<code>occs</code> A data frame of the occurrence record coordinates used for model training</li>
<li>
<code>occs.testing</code> A data frame of the coordinates of the fully withheld testing records (when specified)</li>
<li>
<code>occs.grp</code> A vector of partition groups for occurrence records</li>
<li>
<code>bg</code> A data frame of background record coordinates used for model training</li>
<li>
<code>bg.grp</code> A vector of partition groups for background records</li>
<li>
<code>overlap</code> A list of matrices of pairwise niche overlap statistics</li>
<li>
<code>rmm</code> A list of rangeModelMetadata objects for each model</li>
</ul>
<p>Let’s first examine the structure of the object.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">e.mx</span>
<span class="co">#&gt; An object of class:  ENMevaluation </span>
<span class="co">#&gt;  occurrence/background points:  86 / 3696 </span>
<span class="co">#&gt;  partition method:  block </span>
<span class="co">#&gt;  partition settings:  orientation = lat_lon </span>
<span class="co">#&gt;  clamp:  TRUE </span>
<span class="co">#&gt;  clamp directions:  left: bio1, bio12, bio16, bio17, bio5, bio6, bio7, bio8, biome</span>
<span class="co">#&gt;                     right: bio1, bio12, bio16, bio17, bio5, bio6, bio7, bio8, biome </span>
<span class="co">#&gt;  algorithm:  maxnet </span>
<span class="co">#&gt;  tune settings:  fc: L,LQ,LQH,H</span>
<span class="co">#&gt;                  rm: 1,2,3,4,5 </span>
<span class="co">#&gt;  overlap:  TRUE </span>
<span class="co">#&gt; Refer to ?ENMevaluation for information on slots.</span>
<span class="co"># Simplify the summary to look at higher level items.</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">e.mx</span>, max.level<span class="op">=</span><span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; Formal class 'ENMevaluation' [package "ENMeval"] with 20 slots</span>
<span class="co">#&gt;   ..@ algorithm          : chr "maxnet"</span>
<span class="co">#&gt;   ..@ tune.settings      :'data.frame':  20 obs. of  3 variables:</span>
<span class="co">#&gt;   .. ..- attr(*, "out.attrs")=List of 2</span>
<span class="co">#&gt;   ..@ partition.method   : chr "block"</span>
<span class="co">#&gt;   ..@ partition.settings :List of 1</span>
<span class="co">#&gt;   ..@ other.settings     :List of 7</span>
<span class="co">#&gt;   ..@ doClamp            : logi TRUE</span>
<span class="co">#&gt;   ..@ clamp.directions   :List of 2</span>
<span class="co">#&gt;   ..@ results            :'data.frame':  20 obs. of  19 variables:</span>
<span class="co">#&gt;   .. ..- attr(*, "out.attrs")=List of 2</span>
<span class="co">#&gt;   ..@ results.partitions :'data.frame':  80 obs. of  7 variables:</span>
<span class="co">#&gt;   ..@ models             :List of 20</span>
<span class="co">#&gt;   ..@ variable.importance:List of 20</span>
<span class="co">#&gt;   ..@ predictions        :Formal class 'RasterStack' [package "raster"] with 11 slots</span>
<span class="co">#&gt;   ..@ taxon.name         : chr ""</span>
<span class="co">#&gt;   ..@ occs               :'data.frame':  86 obs. of  11 variables:</span>
<span class="co">#&gt;   ..@ occs.testing       :'data.frame':  0 obs. of  0 variables</span>
<span class="co">#&gt;   ..@ occs.grp           : Factor w/ 4 levels "1","2","3","4": 3 4 4 4 4 4 3 1 3 3 ...</span>
<span class="co">#&gt;   ..@ bg                 :'data.frame':  3696 obs. of  11 variables:</span>
<span class="co">#&gt;   ..@ bg.grp             : Factor w/ 4 levels "1","2","3","4": 4 1 2 2 2 1 2 1 2 1 ...</span>
<span class="co">#&gt;   ..@ overlap            : list()</span>
<span class="co">#&gt;   ..@ rmm                :List of 8</span>
<span class="co">#&gt;   .. ..- attr(*, "class")= chr [1:2] "list" "RMM"</span></code></pre></div>
<p>We can use helper functions to access the slots in the <code>ENMevaluation</code> object.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Access algorithm, tuning settings, and partition method information.</span>
<span class="fu"><a href="../reference/eval.algorithm.html">eval.algorithm</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span>
<span class="co">#&gt; [1] "maxnet"</span>
<span class="fu"><a href="../reference/eval.tune.settings.html">eval.tune.settings</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;    fc rm   tune.args</span>
<span class="co">#&gt; 1   L  1   fc.L_rm.1</span>
<span class="co">#&gt; 2  LQ  1  fc.LQ_rm.1</span>
<span class="co">#&gt; 3 LQH  1 fc.LQH_rm.1</span>
<span class="co">#&gt; 4   H  1   fc.H_rm.1</span>
<span class="co">#&gt; 5   L  2   fc.L_rm.2</span>
<span class="co">#&gt; 6  LQ  2  fc.LQ_rm.2</span>
<span class="fu"><a href="../reference/eval.partition.method.html">eval.partition.method</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span>
<span class="co">#&gt; [1] "block"</span>
<span class="co"># Results table with summary statistics for cross validation on test data.</span>
<span class="fu"><a href="../reference/eval.results.html">eval.results</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;    fc rm   tune.args auc.train cbi.train auc.diff.avg auc.diff.sd auc.val.avg</span>
<span class="co">#&gt; 1   L  1   fc.L_rm.1 0.7654441     0.933    0.1494326  0.10158621   0.6320385</span>
<span class="co">#&gt; 2  LQ  1  fc.LQ_rm.1 0.7777390     0.959    0.1685190  0.10536896   0.6142312</span>
<span class="co">#&gt; 3 LQH  1 fc.LQH_rm.1 0.8225737     0.974    0.1705792  0.10255312   0.6541147</span>
<span class="co">#&gt; 4   H  1   fc.H_rm.1 0.8289068     0.970    0.1874572  0.12130706   0.6335548</span>
<span class="co">#&gt; 5   L  2   fc.L_rm.2 0.7620778     0.936    0.1542151  0.09689043   0.6280807</span>
<span class="co">#&gt; 6  LQ  2  fc.LQ_rm.2 0.7712234     0.934    0.1646408  0.08872182   0.6206326</span>
<span class="co">#&gt;   auc.val.sd cbi.val.avg cbi.val.sd or.10p.avg or.10p.sd or.mtp.avg or.mtp.sd</span>
<span class="co">#&gt; 1  0.1246002     0.24175  0.4873256  0.2700216 0.1865275  0.1071429 0.1252360</span>
<span class="co">#&gt; 2  0.1142560     0.34775  0.4224329  0.3170996 0.1825169  0.1650433 0.1264382</span>
<span class="co">#&gt; 3  0.1240784     0.26075  0.3164726  0.4107143 0.2265216  0.1883117 0.1555834</span>
<span class="co">#&gt; 4  0.1221375     0.22850  0.4523689  0.4448052 0.2362482  0.1877706 0.1390612</span>
<span class="co">#&gt; 5  0.1246135     0.20175  0.5307915  0.2348485 0.1638315  0.1309524 0.1524553</span>
<span class="co">#&gt; 6  0.1106943     0.17950  0.4434512  0.3170996 0.1825169  0.1536797 0.1428134</span>
<span class="co">#&gt;       AICc delta.AICc        w.AIC ncoef</span>
<span class="co">#&gt; 1 1416.805  11.446226 3.080007e-03    14</span>
<span class="co">#&gt; 2 1405.359   0.000000 9.420375e-01    16</span>
<span class="co">#&gt; 3 1446.334  40.974769 1.192642e-09    32</span>
<span class="co">#&gt; 4 1466.929  61.569955 4.020892e-14    34</span>
<span class="co">#&gt; 5 1415.743  10.384232 5.237943e-03    12</span>
<span class="co">#&gt; 6 1415.227   9.867774 6.781228e-03    16</span>
<span class="co"># Results table with cross validation statistics for each test partition.</span>
<span class="fu"><a href="../reference/eval.results.partitions.html">eval.results.partitions</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;    tune.args fold   auc.val   auc.diff cbi.val    or.mtp     or.10p</span>
<span class="co">#&gt; 1  fc.L_rm.1    1 0.7949349 0.02992021   0.805 0.0000000 0.00000000</span>
<span class="co">#&gt; 2  fc.L_rm.1    2 0.4981212 0.26895996  -0.231 0.1904762 0.42857143</span>
<span class="co">#&gt; 3  fc.L_rm.1    3 0.5885089 0.18398869  -0.093 0.0000000 0.31818182</span>
<span class="co">#&gt; 4  fc.L_rm.1    4 0.6465889 0.11486163   0.486 0.2380952 0.33333333</span>
<span class="co">#&gt; 5 fc.LQ_rm.1    1 0.7812515 0.01371489   0.852 0.0000000 0.09090909</span>
<span class="co">#&gt; 6 fc.LQ_rm.1    2 0.5283641 0.23959612  -0.179 0.2857143 0.38095238</span>
<span class="co"># List of models with names corresponding to tune.args column label.</span>
<span class="fu"><a href="../reference/eval.models.html">eval.models</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span>max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; List of 20</span>
<span class="co">#&gt;  $ fc.L_rm.1  :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.LQ_rm.1 :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.LQH_rm.1:List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.H_rm.1  :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.L_rm.2  :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.LQ_rm.2 :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.LQH_rm.2:List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.H_rm.2  :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.L_rm.3  :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.LQ_rm.3 :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.LQH_rm.3:List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.H_rm.3  :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.L_rm.4  :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.LQ_rm.4 :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.LQH_rm.4:List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.H_rm.4  :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.L_rm.5  :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.LQ_rm.5 :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.LQH_rm.5:List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co">#&gt;  $ fc.H_rm.5  :List of 23</span>
<span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "maxnet" "lognet" "glmnet"</span>
<span class="co"># The "betas" slot in a maxnet model is a named vector of the variable </span>
<span class="co"># coefficients and what kind they are (in R formula notation).</span>
<span class="co"># Note that the html file that is created when maxent.jar is run is **not** kept.</span>
<span class="va">m1.mx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval.models.html">eval.models</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span><span class="op">[[</span><span class="st">"fc.LQH_rm.1"</span><span class="op">]</span><span class="op">]</span>
<span class="va">m1.mx</span><span class="op">$</span><span class="va">betas</span>
<span class="co">#&gt;                            bio12                            bio16 </span>
<span class="co">#&gt;                     1.392149e-03                    -2.923233e-04 </span>
<span class="co">#&gt;                            bio17                             bio7 </span>
<span class="co">#&gt;                    -2.924248e-04                    -1.535593e-02 </span>
<span class="co">#&gt;                             bio8                       I(bio16^2) </span>
<span class="co">#&gt;                     8.812818e-03                    -2.802214e-07 </span>
<span class="co">#&gt;                       I(bio17^2)                        I(bio6^2) </span>
<span class="co">#&gt;                    -4.754272e-06                    -2.184916e-05 </span>
<span class="co">#&gt;                        I(bio7^2) hinge(bio1):266.795918367347:289 </span>
<span class="co">#&gt;                    -1.493074e-05                     5.010535e-01 </span>
<span class="co">#&gt;  hinge(bio12):0:1254.20408163265  hinge(bio12):0:2038.08163265306 </span>
<span class="co">#&gt;                     3.148375e+00                    -9.846550e-05 </span>
<span class="co">#&gt;  hinge(bio16):0:501.632653061224  hinge(bio16):0:752.448979591837 </span>
<span class="co">#&gt;                     3.803475e+00                    -1.627107e+00 </span>
<span class="co">#&gt;  hinge(bio16):0:802.612244897959  hinge(bio16):0:953.102040816327 </span>
<span class="co">#&gt;                    -5.788277e-01                    -1.071324e+00 </span>
<span class="co">#&gt;  hinge(bio17):0:122.122448979592  hinge(bio17):0:274.775510204082 </span>
<span class="co">#&gt;                    -6.177567e-01                    -3.565539e-02 </span>
<span class="co">#&gt; hinge(bio5):298.591836734694:363 hinge(bio5):325.428571428571:363 </span>
<span class="co">#&gt;                    -2.095051e+00                     1.825251e-02 </span>
<span class="co">#&gt; hinge(bio5):341.530612244898:363  hinge(bio7):64:106.612244897959 </span>
<span class="co">#&gt;                    -1.711330e+00                    -7.803971e-01 </span>
<span class="co">#&gt; hinge(bio8):258.775510204082:290 hinge(bio8):263.979591836735:290 </span>
<span class="co">#&gt;                     2.857677e-01                     1.436036e+00 </span>
<span class="co">#&gt; hinge(bio8):274.387755102041:290             categorical(biome):2 </span>
<span class="co">#&gt;                    -2.083530e-01                     1.086907e-01 </span>
<span class="co">#&gt;             categorical(biome):3             categorical(biome):7 </span>
<span class="co">#&gt;                    -3.602166e+00                    -1.007866e+00 </span>
<span class="co">#&gt;             categorical(biome):9            categorical(biome):10 </span>
<span class="co">#&gt;                    -2.389272e+00                    -1.896736e+00 </span>
<span class="co">#&gt;            categorical(biome):13            categorical(biome):14 </span>
<span class="co">#&gt;                     9.849060e-01                    -1.176934e-01</span>
<span class="co"># the enframe function from the tibble package makes this named vector into a </span>
<span class="co"># more readable table.</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html">enframe</a></span><span class="op">(</span><span class="va">m1.mx</span><span class="op">$</span><span class="va">betas</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 32 x 2</span>
<span class="co">#&gt;    name                                    value</span>
<span class="co">#&gt;    &lt;chr&gt;                                   &lt;dbl&gt;</span>
<span class="co">#&gt;  1 bio12                             0.00139    </span>
<span class="co">#&gt;  2 bio16                            -0.000292   </span>
<span class="co">#&gt;  3 bio17                            -0.000292   </span>
<span class="co">#&gt;  4 bio7                             -0.0154     </span>
<span class="co">#&gt;  5 bio8                              0.00881    </span>
<span class="co">#&gt;  6 I(bio16^2)                       -0.000000280</span>
<span class="co">#&gt;  7 I(bio17^2)                       -0.00000475 </span>
<span class="co">#&gt;  8 I(bio6^2)                        -0.0000218  </span>
<span class="co">#&gt;  9 I(bio7^2)                        -0.0000149  </span>
<span class="co">#&gt; 10 hinge(bio1):266.795918367347:289  0.501      </span>
<span class="co">#&gt; # … with 22 more rows</span>
<span class="co"># RasterStack of model predictions (for extent of "envs") with names corresponding </span>
<span class="co"># to tune.args column label.</span>
<span class="fu"><a href="../reference/eval.predictions.html">eval.predictions</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span>
<span class="co">#&gt; class      : RasterStack </span>
<span class="co">#&gt; dimensions : 192, 186, 35712, 20  (nrow, ncol, ncell, nlayers)</span>
<span class="co">#&gt; resolution : 0.5, 0.5  (x, y)</span>
<span class="co">#&gt; extent     : -125, -32, -56, 40  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=longlat +datum=WGS84 +no_defs </span>
<span class="co">#&gt; names      :    fc.L_rm.1,   fc.LQ_rm.1,  fc.LQH_rm.1,    fc.H_rm.1,    fc.L_rm.2,   fc.LQ_rm.2,  fc.LQH_rm.2,    fc.H_rm.2,    fc.L_rm.3,   fc.LQ_rm.3,  fc.LQH_rm.3,    fc.H_rm.3,    fc.L_rm.4,   fc.LQ_rm.4,  fc.LQH_rm.4, ... </span>
<span class="co">#&gt; min values : 1.308959e-05, 2.132842e-06, 1.325253e-06, 1.758681e-06, 7.928211e-05, 2.036179e-05, 1.810393e-05, 2.819560e-04, 3.528226e-04, 9.584001e-05, 4.953830e-05, 2.078272e-03, 6.745470e-04, 3.051206e-04, 2.846560e-04, ... </span>
<span class="co">#&gt; max values :    0.9999188,    0.9997518,    0.9999335,    0.9999989,    0.9997802,    0.9991092,    0.9996577,    0.9999565,    0.9994127,    0.9979563,    0.9981764,    0.9961214,    0.9985052,    0.9956428,    0.9954452, ...</span>
<span class="co"># Original occurrence data coordinates with associated predictor variable values.</span>
<span class="fu"><a href="../reference/eval.occs.html">eval.occs</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   longitude  latitude bio1 bio12 bio16 bio17 bio5 bio6 bio7 bio8 biome</span>
<span class="co">#&gt; 1 -84.67201 10.478622  235  2779  1191   154  305  175  129  231     1</span>
<span class="co">#&gt; 2 -76.79294  8.433710  261  2192   739   222  306  220   87  260     1</span>
<span class="co">#&gt; 3 -80.12543  8.610270  259  2876  1119   163  315  214  101  253     1</span>
<span class="co">#&gt; 4 -79.55048  8.952963  267  1912   851    54  322  223   99  262     1</span>
<span class="co">#&gt; 5 -79.44806  9.225840  255  2539  1045   116  307  207  100  249     1</span>
<span class="co">#&gt; 6 -75.02596  9.183511  272  1227   503    64  340  207  133  268     1</span>
<span class="co"># Background data coordinates with associated predictor variable values.</span>
<span class="fu"><a href="../reference/eval.bg.html">eval.bg</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;    longitude latitude bio1 bio12 bio16 bio17 bio5 bio6 bio7 bio8 biome</span>
<span class="co">#&gt; 87    -66.25     8.75  267  1149   629    12  336  201  135  263     7</span>
<span class="co">#&gt; 88    -78.75    -0.25  153  1909   846   176  213   90  123  155     1</span>
<span class="co">#&gt; 89    -57.75    -0.25  265  2371  1053   299  331  215  116  260     1</span>
<span class="co">#&gt; 90    -70.75    -5.75  257  2471   807   331  315  193  122  257     1</span>
<span class="co">#&gt; 91    -57.25     3.25  264  2031   941   164  334  213  122  260     1</span>
<span class="co">#&gt; 92    -78.75    -1.75   97   804   308   114  159   38  122   99     1</span>
<span class="co"># Partition group assignments for occurrence data.</span>
<span class="fu"><a href="../reference/eval.occs.grp.html">eval.occs.grp</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  Factor w/ 4 levels "1","2","3","4": 3 4 4 4 4 4 3 1 3 3 ...</span>
<span class="co"># Partition group assignments for background data.</span>
<span class="fu"><a href="../reference/eval.bg.grp.html">eval.bg.grp</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  Factor w/ 4 levels "1","2","3","4": 4 1 2 2 2 1 2 1 2 1 ...</span></code></pre></div>
<p>Maxent models run with <code>maxent.jar</code> have a different structure from models run with <code>maxnet</code>, so below is a demonstration of how to extract the “betas” information for <code>maxent.jar</code> models. In the case that the user can run <code>maxent.jar</code>, please run these lines independently. As many users have issues running the Java version of Maxent, this portion is not automatically evaluated for the vignette to avoid R Markdown knitting errors.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># NOTE -- This code is not evaluated and so will display no output in this vignette.</span>
<span class="co"># Please run independently.</span>

<span class="co"># For maxent.jar models, we can access this information in the lambdas slot.</span>
<span class="va">m1.mxjar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval.models.html">eval.models</a></span><span class="op">(</span><span class="va">e.mxjar</span><span class="op">)</span><span class="op">[[</span><span class="st">"fc.LQH_rm.1"</span><span class="op">]</span><span class="op">]</span>
<span class="va">m1.mxjar</span><span class="op">@</span><span class="va">lambdas</span>

<span class="co"># The notation used here is difficult to decipher, so check out the </span>
<span class="co"># [`rmaxent`](https://github.com/johnbaums/rmaxent/blob/master/) package.</span>
<span class="co"># available on Github for the `parse_lambdas()` function that makes it easier to read.</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"johnbaums/rmaxent"</span><span class="op">)</span>
<span class="fu">rmaxent</span><span class="fu">::</span><span class="fu">parse_lambdas</span><span class="op">(</span><span class="va">m1.mxjar</span><span class="op">)</span>

<span class="co"># We can also get a long list of results statistics from the results slot.</span>
<span class="va">m1.mxjar</span><span class="op">@</span><span class="va">results</span></code></pre></div>
</div>
</div>
<div id="plot" class="section level2">
<h2 class="hasAnchor">
<a href="#plot" class="anchor"></a>Visualizing tuning results</h2>
<p><code>ENMeval</code> 2.0.0 has a built-in plotting function (<code>eval.plot</code>) to visualize the results of the different models you tuned in a ggplot. Here, we will plot average validation AUC and omission rates for the models we tuned. The x-axis is the regularization multiplier, and the color of the points and lines represents the feature class.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/evalplot.stats.html">evalplot.stats</a></span><span class="op">(</span>e <span class="op">=</span> <span class="va">e.mx</span>, stats <span class="op">=</span> <span class="st">"or.mtp"</span>, color <span class="op">=</span> <span class="st">"fc"</span>, x.var <span class="op">=</span> <span class="st">"rm"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/plot.res-1.png" width="672"></p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We can plot more than one statistic at once with ggplot facetting.</span>
<span class="fu"><a href="../reference/evalplot.stats.html">evalplot.stats</a></span><span class="op">(</span>e <span class="op">=</span> <span class="va">e.mx</span>, stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"or.mtp"</span>, <span class="st">"auc.val"</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"fc"</span>, x.var <span class="op">=</span> <span class="st">"rm"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/plot.res-2.png" width="672"></p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sometimes the error bars make it hard to visualize the plot, so we can try turning them off.</span>
<span class="fu"><a href="../reference/evalplot.stats.html">evalplot.stats</a></span><span class="op">(</span>e <span class="op">=</span> <span class="va">e.mx</span>, stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"or.mtp"</span>, <span class="st">"auc.val"</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"fc"</span>, x.var <span class="op">=</span> <span class="st">"rm"</span>, 
               error.bars <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/plot.res-3.png" width="672"></p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We can also fiddle with the dodge argument to jitter the positions of overlapping points.</span>
<span class="fu"><a href="../reference/evalplot.stats.html">evalplot.stats</a></span><span class="op">(</span>e <span class="op">=</span> <span class="va">e.mx</span>, stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"or.mtp"</span>, <span class="st">"auc.val"</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"fc"</span>, x.var <span class="op">=</span> <span class="st">"rm"</span>, 
               dodge <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/plot.res-4.png" width="672"></p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Finally, we can switch which variables are on the x-axis and which symbolized by color.</span>
<span class="co"># ENMeval currently only accepts two variables for plotting at a time.</span>
<span class="fu"><a href="../reference/evalplot.stats.html">evalplot.stats</a></span><span class="op">(</span>e <span class="op">=</span> <span class="va">e.mx</span>, stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"or.mtp"</span>, <span class="st">"auc.val"</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"rm"</span>, x.var <span class="op">=</span> <span class="st">"fc"</span>, 
               error.bars <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/plot.res-5.png" width="672"></p>
</div>
<div id="select" class="section level2">
<h2 class="hasAnchor">
<a href="#select" class="anchor"></a>Model selection</h2>
<p>Once we have our results, we will want to select one or more models that we think are optimal across all the models we ran. For this example, we will demonstrate how to select models without considering cross-validation results using AICc (Warren &amp; Seifert 2011; but see Velasco &amp; González-Salazar 2019) and a sequential method that uses cross-validation results by selecting models with the lowest average test omission rate, and to break ties, with the highest average validation AUC (Radosavljevic &amp; Anderson 2014, Kass et al. 2020). Lobo et al. (2008) and others have pointed out that validation AUC is inappropriate as an absolute performance measure of presence-background ENMs, but it is valid to use for relative comparisons of models constructed with the same data. It is important to note that <code>ENMeval</code> 2.0.0 also returns the continuous Boyce Index (Hirzel et al. 2006) for training, validation, and fully withheld testing data by default using the R package <code>ecospat</code> (Di Cola et al. 2017), so this metric can be used to select optimal models as well.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Overall results</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval.results.html">eval.results</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span>
<span class="co"># Select the model with delta AICc equal to 0, or the one with the lowest AICc score.</span>
<span class="co"># In practice, models with delta AICc scores less than 2 are usually considered </span>
<span class="co"># statistically equivalent.</span>
<span class="va">opt.aicc</span> <span class="op">&lt;-</span> <span class="va">res</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">delta.AICc</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>
<span class="va">opt.aicc</span>
<span class="co">#&gt;   fc rm  tune.args auc.train cbi.train auc.diff.avg auc.diff.sd auc.val.avg</span>
<span class="co">#&gt; 1 LQ  1 fc.LQ_rm.1  0.777739     0.959     0.168519    0.105369   0.6142312</span>
<span class="co">#&gt;   auc.val.sd cbi.val.avg cbi.val.sd or.10p.avg or.10p.sd or.mtp.avg or.mtp.sd</span>
<span class="co">#&gt; 1   0.114256     0.34775  0.4224329  0.3170996 0.1825169  0.1650433 0.1264382</span>
<span class="co">#&gt;       AICc delta.AICc     w.AIC ncoef</span>
<span class="co">#&gt; 1 1405.359          0 0.9420375    16</span>
<span class="co"># This dplyr operation executes the sequential criteria explained above.</span>
<span class="va">opt.seq</span> <span class="op">&lt;-</span> <span class="va">res</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">or.10p.avg</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">or.10p.avg</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">auc.val.avg</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">auc.val.avg</span><span class="op">)</span><span class="op">)</span>
<span class="va">opt.seq</span>
<span class="co">#&gt;   fc rm  tune.args auc.train cbi.train auc.diff.avg auc.diff.sd auc.val.avg</span>
<span class="co">#&gt; 1 LQ  5 fc.LQ_rm.5  0.753467     0.971    0.1539313  0.06387996   0.6385898</span>
<span class="co">#&gt;   auc.val.sd cbi.val.avg cbi.val.sd or.10p.avg or.10p.sd or.mtp.avg or.mtp.sd</span>
<span class="co">#&gt; 1  0.1149973      0.3525  0.3395414  0.2002165 0.1277056  0.0952381 0.1603096</span>
<span class="co">#&gt;       AICc delta.AICc       w.AIC ncoef</span>
<span class="co">#&gt; 1 1415.776   10.41729 0.005152087     9</span></code></pre></div>
<p>Let’s now choose the optimal model settings based on the sequential criteria and examine it.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We can select a single model from the ENMevaluation object using the tune.args of our</span>
<span class="co"># optimal model.</span>
<span class="va">mod.seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval.models.html">eval.models</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span><span class="op">[[</span><span class="va">opt.seq</span><span class="op">$</span><span class="va">tune.args</span><span class="op">]</span><span class="op">]</span>
<span class="co"># Here are the non-zero coefficients in our model.</span>
<span class="va">mod.seq</span><span class="op">$</span><span class="va">betas</span>
<span class="co">#&gt;                 bio12                 bio17                  bio7 </span>
<span class="co">#&gt;          4.806754e-04         -1.104413e-03         -2.073476e-02 </span>
<span class="co">#&gt;                  bio8            I(bio17^2)             I(bio5^2) </span>
<span class="co">#&gt;          6.784528e-03         -1.158647e-06         -2.343874e-05 </span>
<span class="co">#&gt;  categorical(biome):3  categorical(biome):7 categorical(biome):10 </span>
<span class="co">#&gt;         -1.424702e+00         -6.938978e-01         -1.040155e+00</span>
<span class="co"># And these are the marginal response curves for the predictor variables wit non-zero </span>
<span class="co"># coefficients in our model. We define the y-axis to be the cloglog transformation, which</span>
<span class="co"># is an approximation of occurrence probability (with assumptions) bounded by 0 and 1</span>
<span class="co"># (Phillips et al. 2017).</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="va">mod.seq</span>, type <span class="op">=</span> <span class="st">"cloglog"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/mod.obj1-1.png" width="672"></p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># The above function plots with graphical customizations to include multiple plots on </span>
<span class="co"># the same page. </span>
<span class="co"># Clear the graphics device to avoid plotting sequential plots with these settings.</span>
<span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; null device </span>
<span class="co">#&gt;           1</span></code></pre></div>
<p>This is how to view the marginal response curves for <code>maxent.jar</code> models.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># NOTE -- This code is not evaluated and so will display no output in this vignette.</span>
<span class="co"># Please run independently.</span>

<span class="co"># maxent.jar models use the dismo::response() function for this</span>
<span class="fu">dismo</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/dismo/man/response.html">response</a></span><span class="op">(</span><span class="fu"><a href="../reference/eval.models.html">eval.models</a></span><span class="op">(</span><span class="va">e.mxjar</span><span class="op">)</span><span class="op">[[</span><span class="va">opt.seq</span><span class="op">$</span><span class="va">tune.args</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<p>Now we plot and inspect the prediction raster for our optimal model. Note that by default for <code>maxent.jar</code> (versions &gt;3.3.3k) or <code>maxnet</code> models, these predictions are in the ‘cloglog’ output format that is bounded between 0 and 1 (Phillips et al. 2017). This can be changed with the <code>pred.type</code> argument in <code><a href="../reference/ENMevaluate.html">ENMevaluate()</a></code>.</p>
<p>These predictions are for the entire extent of the input predictor variable rasters, and thus include areas outside of the background extent used for model training. Thus, we should interpret areas far outside this extent with caution.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We can select the model predictions for our optimal model the same way we did for the </span>
<span class="co"># model object above.</span>
<span class="va">pred.seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval.predictions.html">eval.predictions</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span><span class="op">[[</span><span class="va">opt.seq</span><span class="op">$</span><span class="va">tune.args</span><span class="op">]</span><span class="op">]</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="va">pred.seq</span><span class="op">)</span>

<span class="co"># We can also plot the binned background points with the occurrence points on top to </span>
<span class="co"># visualize where the training data is located.</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="fu"><a href="../reference/eval.bg.html">eval.bg</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span>, pch <span class="op">=</span> <span class="fl">3</span>, col <span class="op">=</span> <span class="fu"><a href="../reference/eval.bg.grp.html">eval.bg.grp</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span>, cex <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="fu"><a href="../reference/eval.occs.html">eval.occs</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span>, pch <span class="op">=</span> <span class="fl">21</span>, bg <span class="op">=</span> <span class="fu"><a href="../reference/eval.occs.grp.html">eval.occs.grp</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/plotPred-1.png" width="672"></p>
<p>Let us now explore how model complexity changes the predictions in our example. We will compare the simple model built with only linear feature classes and the highest regularization multiplier value we used (fc=‘L’, rm=5) with the complex model built with linear, quadratic, and hinge feature classes and the lowest regularization multiplier value we used (i.e., fc=‘LQH’, rm=1). We will first examine the marginal response curves, and then the mapped model model predictions. Notice how the simpler models tend to have more smooth predictions of suitability, while the complex ones tend to show more patchiness. Deciding on whether a model that is more simple or complex is appropriate for your study is not straightforward, but guides exist in the literature (e.g., Merow et al. 2014).</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># First, let's examine the non-zero model coefficients in the betas slot.</span>
<span class="co"># The simpler model has fewer model coefficients.</span>
<span class="va">mod.simple</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval.models.html">eval.models</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span><span class="op">[[</span><span class="st">'fc.L_rm.5'</span><span class="op">]</span><span class="op">]</span>
<span class="va">mod.complex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval.models.html">eval.models</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span><span class="op">[[</span><span class="st">'fc.LQH_rm.1'</span><span class="op">]</span><span class="op">]</span>
<span class="va">mod.simple</span><span class="op">$</span><span class="va">betas</span>
<span class="co">#&gt;                 bio12                 bio17                  bio5 </span>
<span class="co">#&gt;          0.0004319512         -0.0018784330         -0.0052718866 </span>
<span class="co">#&gt;                  bio7  categorical(biome):3  categorical(biome):7 </span>
<span class="co">#&gt;         -0.0239469663         -1.3344340769         -0.8455282749 </span>
<span class="co">#&gt; categorical(biome):10 </span>
<span class="co">#&gt;         -1.1345606070</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">mod.simple</span><span class="op">$</span><span class="va">betas</span><span class="op">)</span>
<span class="co">#&gt; [1] 7</span>
<span class="va">mod.complex</span><span class="op">$</span><span class="va">betas</span>
<span class="co">#&gt;                            bio12                            bio16 </span>
<span class="co">#&gt;                     1.392149e-03                    -2.923233e-04 </span>
<span class="co">#&gt;                            bio17                             bio7 </span>
<span class="co">#&gt;                    -2.924248e-04                    -1.535593e-02 </span>
<span class="co">#&gt;                             bio8                       I(bio16^2) </span>
<span class="co">#&gt;                     8.812818e-03                    -2.802214e-07 </span>
<span class="co">#&gt;                       I(bio17^2)                        I(bio6^2) </span>
<span class="co">#&gt;                    -4.754272e-06                    -2.184916e-05 </span>
<span class="co">#&gt;                        I(bio7^2) hinge(bio1):266.795918367347:289 </span>
<span class="co">#&gt;                    -1.493074e-05                     5.010535e-01 </span>
<span class="co">#&gt;  hinge(bio12):0:1254.20408163265  hinge(bio12):0:2038.08163265306 </span>
<span class="co">#&gt;                     3.148375e+00                    -9.846550e-05 </span>
<span class="co">#&gt;  hinge(bio16):0:501.632653061224  hinge(bio16):0:752.448979591837 </span>
<span class="co">#&gt;                     3.803475e+00                    -1.627107e+00 </span>
<span class="co">#&gt;  hinge(bio16):0:802.612244897959  hinge(bio16):0:953.102040816327 </span>
<span class="co">#&gt;                    -5.788277e-01                    -1.071324e+00 </span>
<span class="co">#&gt;  hinge(bio17):0:122.122448979592  hinge(bio17):0:274.775510204082 </span>
<span class="co">#&gt;                    -6.177567e-01                    -3.565539e-02 </span>
<span class="co">#&gt; hinge(bio5):298.591836734694:363 hinge(bio5):325.428571428571:363 </span>
<span class="co">#&gt;                    -2.095051e+00                     1.825251e-02 </span>
<span class="co">#&gt; hinge(bio5):341.530612244898:363  hinge(bio7):64:106.612244897959 </span>
<span class="co">#&gt;                    -1.711330e+00                    -7.803971e-01 </span>
<span class="co">#&gt; hinge(bio8):258.775510204082:290 hinge(bio8):263.979591836735:290 </span>
<span class="co">#&gt;                     2.857677e-01                     1.436036e+00 </span>
<span class="co">#&gt; hinge(bio8):274.387755102041:290             categorical(biome):2 </span>
<span class="co">#&gt;                    -2.083530e-01                     1.086907e-01 </span>
<span class="co">#&gt;             categorical(biome):3             categorical(biome):7 </span>
<span class="co">#&gt;                    -3.602166e+00                    -1.007866e+00 </span>
<span class="co">#&gt;             categorical(biome):9            categorical(biome):10 </span>
<span class="co">#&gt;                    -2.389272e+00                    -1.896736e+00 </span>
<span class="co">#&gt;            categorical(biome):13            categorical(biome):14 </span>
<span class="co">#&gt;                     9.849060e-01                    -1.176934e-01</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">mod.complex</span><span class="op">$</span><span class="va">betas</span><span class="op">)</span>
<span class="co">#&gt; [1] 32</span>
<span class="co"># Next, let's take a look at the marginal response curves.</span>
<span class="co"># The complex model has marginal responses with more curves (from quadratic terms) and </span>
<span class="co"># spikes (from hinge terms).</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="va">mod.simple</span>, type <span class="op">=</span> <span class="st">"cloglog"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/plot.pred2-1.png" width="672"></p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="va">mod.complex</span>, type <span class="op">=</span> <span class="st">"cloglog"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/plot.pred2-2.png" width="672"></p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Finally, let's cut the plotting area into two rows to visualize the predictions </span>
<span class="co"># side-by-side.</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span>, mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span>
<span class="co"># The simplest model: linear features only and high regularization.</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/eval.predictions.html">eval.predictions</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span><span class="op">[[</span><span class="st">'fc.L_rm.5'</span><span class="op">]</span><span class="op">]</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span>,<span class="fl">20</span><span class="op">)</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90</span>,<span class="op">-</span><span class="fl">30</span><span class="op">)</span>, 
     legend <span class="op">=</span> <span class="cn">FALSE</span>, main <span class="op">=</span> <span class="st">'L_5 prediction'</span><span class="op">)</span>
<span class="co"># The most complex model: linear, quadratic, and hinge features with low regularization</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/eval.predictions.html">eval.predictions</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span><span class="op">[[</span><span class="st">'fc.LQH_rm.1'</span><span class="op">]</span><span class="op">]</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">30</span>,<span class="fl">20</span><span class="op">)</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90</span>,<span class="op">-</span><span class="fl">30</span><span class="op">)</span>, 
     legend <span class="op">=</span> <span class="cn">FALSE</span>, main <span class="op">=</span> <span class="st">'LQH_1 prediction'</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/plot.pred2-3.png" width="672"></p>
</div>
<div id="null" class="section level2">
<h2 class="hasAnchor">
<a href="#null" class="anchor"></a>Null models</h2>
<p>We were able to calculate performance metrics for our model, such as omission rates and AUC, but we do not know how they compare to the same metrics calculated on null models built with random data. This information would allow us to determine the significance and effect sizes of these metrics. If the metrics we calculated for our empirical model were not significantly different from those calculated for a series of null models, we would have not have high confidence that they meaningfully represent how well our empirical model performed. Raes &amp; ter Steege (2007) first introduced the concept of a null ENM and demonstrated how it can be applied. This approach sampled random occurrence records from the study extent and evaluated null models with random cross-validation. Since then some enhancements have been made to this original approach. One such modification was implemented by Bohl et al. (2019), who proposed evaluating models on the same withheld occurrence data as the empirical model. This approach allows for direct comparisons between null performance metrics and those of the emprical models. Kass et al. (2020) further extended this method by configuring it to calculate null performance metrics using spatial partitions.</p>
<p><code>ENMeval</code> 2.0.0 has the functionality to run null ENMs using the Bohl et al. method with the Kass et al. extension and visualize the performance of the empirical model against the null model averages.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We first run the null simulations with 100 iterations to get a reasonable null distribution </span>
<span class="co"># for comparisons with the empirical values</span>
<span class="va">mod.null</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ENMnulls.html">ENMnulls</a></span><span class="op">(</span><span class="va">e.mx</span>, mod.settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fc <span class="op">=</span> <span class="st">"LQ"</span>, rm <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, no.iter <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We can inspect the results of each null simulation.</span>
<span class="fu"><a href="../reference/null.results.html">null.results</a></span><span class="op">(</span><span class="va">mod.null</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   fc rm  tune.args auc.train cbi.train auc.diff.avg auc.diff.sd auc.val.avg</span>
<span class="co">#&gt; 1 LQ  5 fc.LQ_rm.5 0.6142152     0.829    0.1207634  0.11625125   0.4881144</span>
<span class="co">#&gt; 2 LQ  5 fc.LQ_rm.5 0.6912721     0.862    0.2515661  0.15744594   0.4821132</span>
<span class="co">#&gt; 3 LQ  5 fc.LQ_rm.5 0.6523017     0.926    0.1432577  0.14194152   0.5564820</span>
<span class="co">#&gt; 4 LQ  5 fc.LQ_rm.5 0.6456697     0.612    0.1210827  0.09182284   0.5186886</span>
<span class="co">#&gt; 5 LQ  5 fc.LQ_rm.5 0.6561682     0.876    0.1526467  0.07700910   0.4754649</span>
<span class="co">#&gt; 6 LQ  5 fc.LQ_rm.5 0.6339097     0.879    0.1741656  0.08798945   0.6067067</span>
<span class="co">#&gt;   auc.val.sd cbi.val.avg cbi.val.sd or.10p.avg  or.10p.sd or.mtp.avg  or.mtp.sd</span>
<span class="co">#&gt; 1 0.08150622          NA         NA 0.11363636 0.13636364 0.03409091 0.04351941</span>
<span class="co">#&gt; 2 0.22848940     0.03650  0.6981549 0.34577922 0.28558512 0.05735931 0.04334412</span>
<span class="co">#&gt; 3 0.14452994     0.21275  0.5132766 0.10227273 0.11954344 0.05681818 0.06818182</span>
<span class="co">#&gt; 4 0.05639411     0.10625  0.5958833 0.11417749 0.10775330 0.04599567 0.06429154</span>
<span class="co">#&gt; 5 0.07919749     0.00300  0.4616586 0.17532468 0.18442778 0.02326840 0.02688256</span>
<span class="co">#&gt; 6 0.18127970     0.09500  0.5239962 0.07954545 0.09370695 0.03409091 0.06818182</span>
<span class="co">#&gt;   ncoef</span>
<span class="co">#&gt; 1     8</span>
<span class="co">#&gt; 2     6</span>
<span class="co">#&gt; 3     8</span>
<span class="co">#&gt; 4     8</span>
<span class="co">#&gt; 5     9</span>
<span class="co">#&gt; 6     5</span>
<span class="co"># And even inspect the results of each partition of each null simulation.</span>
<span class="fu"><a href="../reference/null.results.partitions.html">null.results.partitions</a></span><span class="op">(</span><span class="va">mod.null</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   iter  tune.args fold   auc.val   auc.diff cbi.val     or.mtp    or.10p</span>
<span class="co">#&gt; 1    1 fc.LQ_rm.5    1 0.5276822 0.12992868  -0.011 0.04545455 0.1818182</span>
<span class="co">#&gt; 2    1 fc.LQ_rm.5    2 0.4735277 0.04928758  -0.543 0.00000000 0.0000000</span>
<span class="co">#&gt; 3    1 fc.LQ_rm.5    3 0.3811798 0.28116456  -0.568 0.09090909 0.2727273</span>
<span class="co">#&gt; 4    1 fc.LQ_rm.5    4 0.5700680 0.02267295      NA 0.00000000 0.0000000</span>
<span class="co">#&gt; 5    2 fc.LQ_rm.5    1 0.5724811 0.12409453   0.049 0.09090909 0.2727273</span>
<span class="co">#&gt; 6    2 fc.LQ_rm.5    2 0.3219760 0.33117520   0.031 0.04761905 0.4285714</span>
<span class="co"># For a summary, we can look at a comparison between the empirical and simulated results.</span>
<span class="fu"><a href="../reference/null.emp.results.html">null.emp.results</a></span><span class="op">(</span><span class="va">mod.null</span><span class="op">)</span>
<span class="co">#&gt;   statistic    auc.train  cbi.train    auc.diff    auc.val     cbi.val</span>
<span class="co">#&gt; 1  emp.mean 0.7534669788 0.97100000  0.15401576 0.63839771  0.35350000</span>
<span class="co">#&gt; 2    emp.sd           NA         NA  0.06391321 0.11524778  0.33818585</span>
<span class="co">#&gt; 3 null.mean 0.6501834164 0.83854000  0.17560369 0.49596295 -0.03396970</span>
<span class="co">#&gt; 4   null.sd 0.0278775577 0.10071586  0.05898199 0.07383716  0.26084162</span>
<span class="co">#&gt; 5    zscore 3.7048999554 1.31518506 -0.36600887 1.92903902  1.48545963</span>
<span class="co">#&gt; 6    pvalue 0.0001057371 0.09422386  0.35717923 0.02686301  0.06871106</span>
<span class="co">#&gt;        or.10p     or.mtp</span>
<span class="co">#&gt; 1  0.20021645 0.09523810</span>
<span class="co">#&gt; 2  0.12770563 0.16030960</span>
<span class="co">#&gt; 3  0.21027597 0.05372835</span>
<span class="co">#&gt; 4  0.10252266 0.04620968</span>
<span class="co">#&gt; 5 -0.09812001 0.89829099</span>
<span class="co">#&gt; 6  0.46091850 0.81548478</span>
<span class="co"># Finally, we can make plots of the null model results as a histogram.</span>
<span class="fu"><a href="../reference/evalplot.nulls.html">evalplot.nulls</a></span><span class="op">(</span><span class="va">mod.null</span>, stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"or.10p"</span>, <span class="st">"auc.val"</span><span class="op">)</span>, plot.type <span class="op">=</span> <span class="st">"histogram"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/unnamed-chunk-13-1.png" width="672"></p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Or we can visualize the results with a violin plot.</span>
<span class="fu"><a href="../reference/evalplot.nulls.html">evalplot.nulls</a></span><span class="op">(</span><span class="va">mod.null</span>, stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"or.10p"</span>, <span class="st">"auc.val"</span><span class="op">)</span>, plot.type <span class="op">=</span> <span class="st">"violin"</span><span class="op">)</span></code></pre></div>
<p><img src="ENMeval-2.0.0-vignette_files/figure-html/unnamed-chunk-13-2.png" width="672"></p>
</div>
<div id="metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#metadata" class="anchor"></a>Metadata</h2>
<p>The last point this vignette will discuss is extremely important for all scientific research: reproducibility. <code>ENMeval</code> 2.0.0 now catalogs details of the analysis essential for reproducibility in a <code>rangeModelMetadata</code> object, accessible from the output ENMevaluation object. The framework and philosophy behind <code>rangeModelMetadata</code> is described by Merow et al. (2019), and other related efforts to define crucial metadata standards and rating systems for ENMs have come out since (e.g., Araújo et al. 2019, Feng et al. 2019, Zurell et al. 2020). Metadata generated by <code>ENMeval</code> can be saved to a CSV file for sharing with collaborators or for use in supplemental information for a manuscript, etc.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Generate a rangeModelMetadata object based on the information stored in the </span>
<span class="co"># ENMevaluate object.</span>
<span class="va">rmm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eval.rmm.html">eval.rmm</a></span><span class="op">(</span><span class="va">e.mx</span><span class="op">)</span>
<span class="co"># We can fill in the model selection rules based on the sequential criteria we chose.</span>
<span class="va">rmm</span><span class="op">$</span><span class="va">model</span><span class="op">$</span><span class="va">selectionRules</span> <span class="op">&lt;-</span> <span class="st">"lowest 10 percentile omission rate, 
break ties with average validation AUC"</span>
<span class="co"># We can also enter our optimal model settings and the details of our optimal </span>
<span class="co"># model's prediction.</span>
<span class="va">rmm</span><span class="op">$</span><span class="va">model</span><span class="op">$</span><span class="va">finalModelSettings</span> <span class="op">&lt;-</span> <span class="st">"LQ4"</span>
<span class="va">rmm</span><span class="op">$</span><span class="va">prediction</span><span class="op">$</span><span class="va">continuous</span><span class="op">$</span><span class="va">minVal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html">cellStats</a></span><span class="op">(</span><span class="va">pred.seq</span>, <span class="va">min</span><span class="op">)</span>
<span class="va">rmm</span><span class="op">$</span><span class="va">prediction</span><span class="op">$</span><span class="va">continuous</span><span class="op">$</span><span class="va">maxVal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html">cellStats</a></span><span class="op">(</span><span class="va">pred.seq</span>, <span class="va">max</span><span class="op">)</span>
<span class="va">rmm</span><span class="op">$</span><span class="va">prediction</span><span class="op">$</span><span class="va">continuous</span><span class="op">$</span><span class="va">units</span> <span class="op">&lt;-</span> <span class="st">"suitability (cloglog transformation)"</span>
<span class="co"># This is just an example -- there may be more fields relevant to fill in for your study.</span></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Finally, we can save the metadata to a CSV file.</span>
<span class="fu">rangeModelMetadata</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rangeModelMetadata/man/rmmToCSV.html">rmmToCSV</a></span><span class="op">(</span><span class="va">rmm</span>, <span class="st">"rmm_mx1.csv"</span><span class="op">)</span></code></pre></div>
</div>
<div id="resources" class="section level2">
<h2 class="hasAnchor">
<a href="#resources" class="anchor"></a>References and Resources</h2>
<p>This list of references and resources is not exhaustive by any means, and mainly includes those sources we referenced in the vignette text. The field is expanding further every year, and there are many other papers and packages that one learning about ENMs should explore.</p>
<div id="web-resources" class="section level6">
<h6>Web Resources</h6>
<ul>
<li><p><a href="https://rspatial.org/raster/sdm/">Hijmans, R. &amp; Elith, J. (2021) Species distribution modeling.</a></p></li>
<li><p><a href="https://groups.google.com/forum/embed/#!forum/maxent">Maxent Google Group</a></p></li>
<li><p><a href="https://biodiversityinformatics.amnh.org/open_source/maxent/Maxent_tutorial_2021.pdf">Phillips, S. J. (2021) A brief tutorial on Maxent. AT&amp;T Research. Available at: https://biodiversityinformatics.amnh.org/open_source/maxent/Maxent_tutorial_2021.pdf</a></p></li>
<li><p><a href="https://www.molecularecologist.com/2013/04/species-distribution-models-in-r/">Yoder, J. (2013). Species distribution models in R. The Molecular Ecologist.</a></p></li>
</ul>
</div>
<div id="general-guides" class="section level6">
<h6>General Guides</h6>
<ul>
<li><p><a href="https://doi.org/10.1126/sciadv.aat4858">Araújo, M. B., Anderson, R. P., Barbosa, A. M., Beale, C. M., Dormann, C. F., Early, R., Garcia, R. A., Guisan, A., Maiorano, L., Naimi, B., &amp; O’Hara, R. B. (2019). Standards for distribution models in biodiversity assessments. Science Advances, 5: eaat4858.</a></p></li>
<li><p><a href="https://doi.org/10.1017/CBO9780511810602">Franklin, J. (2010). Mapping species distributions: spatial inference and prediction. Cambridge University Press.</a></p></li>
<li><p><a href="https://doi.org/10.1017/9781139028271">Guisan A., Thuiller W., &amp; Zimmermann N. E. (2017). Habitat Suitability and Distribution Models with Applications in R. Cambridge University Press, Cambridge, UK.</a></p></li>
<li><p><a href="https://doi.org/10.1111/ecog.00845">Merow, C., Smith, M. J., Edwards Jr, T. C., Guisan, A., McMahon, S. M., Normand, S., Thuiller, W., Wüest, R. O., Zimmermann, N. E., &amp; Elith, J. (2014). What do we gain from simplicity versus complexity in species distribution models? Ecography, 37: 1267–1281.</a></p></li>
<li><p><a href="https://press.princeton.edu/titles/9641.html">Peterson, A.T., Soberón, J., Pearson, R.G., Anderson, R.P., Martínez-Meyer, E., Nakamura, M., &amp; Araújo, M.B. (2011) Ecological Niches and Geographic Distributions. Monographs in Population Biology, 49. Princeton University Press.</a></p></li>
</ul>
<p>-<a href="https://doi.org/10.1016/j.ecolmodel.2008.11.010">VanDerWal, J., Shoo, L. P., Graham, C., &amp; Williams, S. E. (2009). Selecting pseudo-absence data for presence-only distribution modeling: how far should you stray from what you know?. Ecological Modelling, 220: 589-594.</a></p>
</div>
<div id="maxent" class="section level6">
<h6>Maxent</h6>
<ul>
<li><p><a href="https://doi.org/10.1111/j.1472-4642.2010.00725.x">Elith, J., Phillips, S. J., Hastie, T., Dudík, M., Chee, Y. E., &amp; Yates, C. J. (2011). A statistical explanation of MaxEnt for ecologists. Diversity and Distributions, 17(1), 43-57.</a></p></li>
<li><p><a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1600-0587.2013.07872.x">Merow, C., Smith, M., &amp; Silander, J.A. (2013). A practical guide to Maxent: what it does, and why inputs and settings matter. Ecography, 36, 1-12.</a></p></li>
<li><p><a href="https://doi.org/10.1016/j.ecolmodel.2005.03.026">Phillips, S. J., Anderson, R. P., &amp; Schapire, R. E. (2006). Maximum entropy modeling of species geographic distributions. Ecological Modelling, 190: 231–259.</a></p></li>
<li><p><a href="https://doi.org/10.1111/j.0906-7590.2008.5203.x">Phillips, S. J., &amp; Dudík, M. (2008). Modeling of species distributions with Maxent: new extensions and a comprehensive evaluation. Ecography, 31: 161-175.</a></p></li>
<li><p><a href="https://doi.org/10.1111/ecog.03049">Phillips, S. J., Anderson, R. P., Dudík, M., Schapire, R. E., &amp; Blair, M. E. (2017). Opening the black box: an open-source release of Maxent. Ecography, 40: 887–893.</a></p></li>
</ul>
</div>
<div id="environmental-and-niche-similarity" class="section level6">
<h6>Environmental and Niche Similarity</h6>
<ul>
<li><p><a href="https://doi.org/10.1111/j.2041-210X.2010.00036.x">Elith, J., Kearney, M., &amp; Phillips, S. (2010). The art of modelling range‐shifting species. Methods in Ecology and Evolution, 1(4), 330-342.</a></p></li>
<li><p><a href="https://doi.org/10.1007/s10531-009-9584-8">Fitzpatrick, M. C., &amp; Hargrove, W. W. (2009). The projection of species distribution models and the problem of non-analog climate. Biodiversity and Conservation, 18(8), 2255-2261.</a></p></li>
<li><p><a href="https://doi.org/10.1111/ddi.12209">Mesgaran, M. B., Cousens, R. D., &amp; Webber, B. L. (2014). Here be dragons: a tool for quantifying novelty due to covariate range and correlation change when projecting species distribution models. Diversity and Distributions, 20: 1147-1159.</a></p></li>
<li><p><a href="https://doi.org/10.1016/j.ecolmodel.2013.04.011">Owens, H. L., Campbell, L. P., Dornak, L. L., Saupe, E. E., Barve, N., Soberón, J., … &amp; Peterson, A. T. (2013). Constraints on interpretation of ecological niche models by limited environmental ranges on calibration areas. Ecological Modelling, 263, 10-18.</a></p></li>
<li><p><a href="https://dx.doi.org/10.1111/j.1558-5646.2008.00482.x">Warren, D. L., Glor, R. E., &amp; Turelli, M. (2008). Environmental niche equivalency versus conservatism: quantitative approaches to niche evolution. Evolution: International Journal of Organic Evolution, 62: 2868-2883.</a></p></li>
</ul>
</div>
<div id="model-evaluation" class="section level6">
<h6>Model Evaluation</h6>
<ul>
<li><p><a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/ecog.01132">Aiello-Lammens, M.E., Boria, R.A., Radosavljevic, A., Vilela, B., &amp; Anderson, R.P. (2015) spThin: an R package for spatial thinning of species occurrence records for use in ecological niche models. Ecography, 38, 541-545.</a></p></li>
<li><p><a href="https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.463.359&amp;rep=rep1&amp;type=pdf">Fielding, A.H. &amp; Bell, J.F. (1997). A review of methods for the assessment of prediction errors in conservation presence-absence models. Environmental Conservation 24, 38-49.</a></p></li>
<li><p><a href="https://doi.org/10.1016/j.ecolmodel.2019.108719">Hallgren, W., Santana, F., Low-Choy, S., Zhao, Y., &amp; Mackey, B. (2019). Species distribution models can be highly sensitive to algorithm configuration. Ecological Modelling, 408: 108719.</a></p></li>
<li><p><a href="https://web.stanford.edu/~hastie/ElemStatLearn/">Hastie, T., Tibshirani, R., &amp; Friedman, J. (2009). The Elements of Statistical Learning: Data Mining, Inference, and Prediction. Springer, New York, NY.</a></p></li>
<li><p><a href="https://doi.org/10.1016/j.ecolmodel.2006.05.017">Hirzel, A. H., Le Lay, G., Helfer, V., Randin, C., &amp; Guisan, A. (2006). Evaluating the ability of habitat suitability models to predict species presences. Ecological Modelling, 199: 142-152.</a></p></li>
<li><p><a href="https://doi.org/10.1111/ecog.04886">Kass, J. M., Anderson, R. P., Espinosa‐Lucas, A., Juárez‐Jaimes, V., Martínez‐Salas, E., Botello, F., Tavera, G., Flores‐Martínez, J. J., &amp; Sánchez‐Cordero, V. (2020). Biotic predictors with phenological information improve range estimates for migrating monarch butterflies in Mexico. Ecography, 43(3), 341-352.</a></p></li>
<li><p><a href="https://doi.org/10.1111/j.1466-8238.2007.00358.x">Lobo, J. M., Jiménez‐Valverde, A., &amp; Real, R. (2008). AUC: a misleading measure of the performance of predictive distribution models. Global ecology and Biogeography, 17: 145-151.</a></p></li>
<li><p><a href="https://doi.org/10.1111/j.1365-2699.2006.01594.x">Pearson, R.G., Raxworthy, C.J., Nakamura, M., &amp; Peterson, A.T. (2007) Predicting species distributions from small numbers of occurrence records: a test case using cryptic geckos in Madagascar. Journal of Biogeography 34, 102-117.</a></p></li>
<li><p><a href="http://dx.doi.org/10.1016/j.ecolmodel.2007.11.008">Peterson, A. T., Papeş, M., &amp; Soberón, J. (2008). Rethinking receiver operating characteristic analysis applications in ecological niche modeling. Ecological Modelling, 213: 63-72.</a></p></li>
<li><p><a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/jbi.12227">Radosavljevic, A. &amp; Anderson, R.P. (2014). Making better Maxent models of species distributions: complexity, overfitting and evaluation. Journal of Biogeography 41, 629-643.</a></p></li>
<li><p><a href="https://doi.org/10.1111/ecog.02881">Roberts, D. R., Bahn, V., Ciuti, S., Boyce, M. S., Elith, J., Guillera‐Arroita, G., Hauenstein, S., Lahoz‐Monfort, J. J., Schröder, B., Thuiller, W., &amp; Warton, D. I. (2017). Cross-validation strategies for data with temporal, spatial, hierarchical, or phylogenetic structure. Ecography, 40: 913–929.</a></p></li>
<li><p><a href="https://www.sciencedirect.com/science/article/pii/S0304380013004043">Shcheglovitova, M. &amp; Anderson, R.P. (2013). Estimating optimal complexity for ecological niche models: A jackknife approach for species with small sample sizes. Ecological Modelling 269: 9-17.</a></p></li>
<li><p><a href="https://doi.org/10.1016/j.ecoinf.2019.02.005">Velasco, J. A. &amp; González-Salazar, C. (2019). Akaike information criterion should not be a “test” of geographical prediction accuracy in ecological niche modelling. Ecological Informatics, 51: 25–32.</a></p></li>
<li><p><a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1365-2699.2009.02174.x">Veloz, S.D. (2009) Spatially autocorrelated sampling falsely inflates measures of accuracy for presence-only niche models. Journal of Biogeography 36: 2290-2299.</a></p></li>
<li><p><a href="https://doi.org/10.1890/10-1171.1">Warren, D. L. &amp; Seifert, S. N. (2011). Ecological niche modeling in Maxent: the importance of model complexity and the performance of model selection criteria. Ecological Applications, 21: 335–342.</a></p></li>
</ul>
</div>
<div id="null-enms" class="section level6">
<h6>Null ENMs</h6>
<ul>
<li><p><a href="https://doi.org/10.1111/jbi.13573">Bohl, C. L., Kass, J. M., &amp; Anderson, R. P. (2019). A new null model approach to quantify performance and significance for ecological niche models of species distributions. Journal of Biogeography, 46: 1101-1111.</a></p></li>
<li><p><a href="https://www.jstor.org/stable/30244521">Raes, N., &amp; ter Steege, H. (2007). A null-model for significance testing of presence-only species distribution models. Ecography, 30(5), 727-736.</a></p></li>
</ul>
</div>
<div id="model-transfer" class="section level6">
<h6>Model Transfer</h6>
<ul>
<li><p><a href="https://doi.org/10.1093/jmammal/gyz162">Soley-Guardia, M., Carnaval, A. C., &amp; Anderson, R. P. (2019). Sufficient versus optimal climatic stability during the Late Quaternary: using environmental quality to guide phylogeographic inferences in a Neotropical montane system. Journal of Mammalogy, 100: 1783–1807.</a></p></li>
<li><p><a href="https://besjournals.onlinelibrary.wiley.com/doi/abs/10.1111/j.2041-210X.2011.00170.x">Wenger, S.J. &amp; Olden, J.D. (2012) Assessing transferability of ecological models: an underappreciated aspect of statistical validation. Methods in Ecology and Evolution, 3: 260-267.</a></p></li>
<li><p><a href="https://doi.org/10.1111/ddi.12257">Wright, A. N., Hijmans, R. J., Schwartz, M. W., &amp; Shaffer, H. B. (2015). Multiple sources of uncertainty affect metrics for ranking conservation risk under climate change. Diversity and Distributions, 21(1), 111-122.</a></p></li>
</ul>
</div>
<div id="metadata-1" class="section level6">
<h6>Metadata</h6>
<ul>
<li><p><a href="https://doi.org/10.1038/s41559-019-0972-5">Feng, X., Park, D. S., Walker, C., Peterson, A. T., Merow, C., &amp; Papeş, M. (2019). A checklist for maximizing reproducibility of ecological niche models. Nature Ecology and Evolution, 3: 1382–1395.</a></p></li>
<li><p><a href="https://doi.org/10.1111/geb.12993">Merow, C., Maitner, B. S., Owens, H. L., Kass, J. M., Enquist, B. J., Jetz, W., &amp; Guralnick, R. (2019). Species’ range model metadata standards: RMMS. Global Ecology and Biogeography, 28: 1912–1924.</a></p></li>
<li><p><a href="https://doi.org/10.1111/ecog.04960">Zurell, D., Franklin, J., König, C., Bouchet, P. J., Dormann, C. F., Elith, J., Fandos, G., Feng, X., Guillera‐Arroita, G., Guisan, A. &amp; Lahoz‐Monfort, J. J. (2020). A standard protocol for reporting species distribution models. Ecography, 43: 1261–1277.</a></p></li>
</ul>
</div>
<div id="r-packages-for-enms" class="section level6">
<h6>R Packages for ENMs</h6>
<ul>
<li><p>Baumgartner, J., &amp; Wilson, P. (2021). <em>rmaxent: Tools for working with Maxent in R</em>. R package version 0.8.5.9000, URL: <a href="https://github.com/johnbaums/rmaxent">https://github.com/johnbaums/rmaxent</a>.</p></li>
<li><p><a href="http://dx.doi.org/10.7717/peerj.6281">Cobos, M. E., Peterson, A. T., Barve, N., &amp; Osorio-Olvera, L. (2019). kuenm: an R package for detailed development of ecological niche models using Maxent. PeerJ, 7: e6281</a></p></li>
<li><p><a href="https://doi.org/10.1111/ecog.02671">Di Cola, V., Broennimann, O., Petitpierre, B., Breiner, F. T., d’Amen, M., Randin, C., … &amp; Guisan, A. (2017). ecospat: an R package to support spatial analyses and modeling of species niches and distributions. Ecography, 40(6), 774-787.</a></p></li>
<li><p>Lamigueiro, O. P., &amp; Hijmans, R. (2021). rasterVis. R package version 0.50.2. URL: <a href="https://oscarperpinan.github.io/rastervis/">https://oscarperpinan.github.io/rastervis/</a>.</p></li>
<li><p><a href="https://doi.org/10.1111/2041-210X.12261">Muscarella, R., Galante, P. J., Soley-Guardia, M., Boria, R. A., Kass, J. M., Uriarte, M. &amp; Anderson, R. P. (2014). ENMeval: An R package for conducting spatially independent evaluations and estimating optimal model complexity for Maxent ecological niche models. Methods in Ecology and Evolution, 5: 1198–1205.</a></p></li>
<li><p><a href="https://doi.org/10.1111/2041-210X.13107">Valavi, R., Elith, J., Lahoz-Monfort, J. J., &amp; Guillera-Arroita G. (2019) blockCV: An R package for generating spatially or environmentally separated folds for k-fold cross-validation of species distribution models. Methods in Ecology and Evolution, 10:225–232.</a></p></li>
<li><p>Wickham H. (2016). ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jamie M. Kass, Robert Muscarella, Peter J. Galante, Corentin Bohl, Gonzalo E. Buitrago-Pinilla, Robert P. Anderson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
